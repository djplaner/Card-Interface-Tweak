{"version":3,"sources":["webpack://guCardInterface/webpack/bootstrap","webpack://guCardInterface/webpack/runtime/define property getters","webpack://guCardInterface/webpack/runtime/hasOwnProperty shorthand","webpack://guCardInterface/webpack/runtime/make namespace object","webpack://guCardInterface/./src/term-dates.js","webpack://guCardInterface/./src/cards.js"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","2211","0","start","stop","1","2","3","stCop","4","5","6","7","8","9","10","11","12","13","14","exam","2213","2215","3218","15","3215","3211","2201","2203","2205","2207","3208","3205","3201","3198","2197","2195","3195","3191","TERM","DEFAULT_YEAR","SET_DATE","MONTHS","MONTHS_HASH","Jan","January","Feb","February","Mar","March","Apr","April","May","Jun","June","Jul","July","Aug","August","Sep","September","Oct","October","Nov","November","Dec","December","BBIMG","HIDE_IMAGES","interfaceHtmlTemplate","Array","CARDS_CSS","replace","cardHtmlTemplate","linkItemHtmlTemplate","markReviewLinkHtmlTemplate","markUnReviewedLinkHtmlTemplate","dateHtmlTemplate","dualDateHtmlTemplate","comingSoonHtmlTemplate","dualComingSoonHtmlTemplate","LOCATION","DEFAULT_CARD_LABEL","cardsInterface","window","tweak_bb","display_view","location","href","indexOf","page_id","row_element","courseTitle","jQuery","attr","$","parents","hide","html","term","year","m","match","id","breakIdRe","RegExp","mm","qcmRe","qcmRe2","m2","calculateTermYear","cardInterface","find","filter","x","this","innerText","toLowerCase","includes","eq","length","cardRE","items","myCards","CARD_LABEL_NUMBERING","each","idx","review","vtbgen","parent","getReviewStatus","children","replaceWith","description","picUrl","cardBGcolour","date","comingSoon","cardMetaData","descriptionObject","metaDataValues","CARD_METADATA_FIELDS","elementHtmlObjects","elementContent","toArray","map","innerHTML","tmpMetaData","maxLength","i","partialDescription","forEach","element","re","push","label","trim","div","document","createElement","newValue","inlineImage","src","remove","extractCardMetaData","bgSize","dateLabel","activePicUrl","number","iframe","comingSoonLabel","assessmentType","assessmentWeighting","assessmentOutcomes","index","handleCardImage","handleCardImageIframe","handleCardDate","trimLabel","aux","cleanTrimHtml","parseInt","handleCardLabelNumber","hidden","link","linkTarget","header","siblings","title","undefined","li","itemId","item","moduleNum","concat","extractCardsFromContent","on","template","linkTemplate","engageVerb","MARK_REVIEWED","REVIEWED","NO_CARD_NUMBER","NO_COMING_SOON","console","log","text","WIDTH","newParams","cmdline","re_next_arg","next_arg","args","exec","quoted_arg","unquoted_arg","test","quoted_part","substring","parse_parameters","m1","firstItem","cards","cardHtml","linkHtml","cardDate","assumeStop","now","Date","month","convertToDate","time","week","setHours","getTime","inDateRange","generateDateHtml","reviewTemplate","checkForNum","regex","card","setImage","editLink","interfaceHtml","append","addCardInterface","cardContent","not","addEventListener","e","stopPropagation","querySelectorAll","event","querySelector","click","checkIcon","setInterval","container","css","removeBlackboardIcon","clearInterval","param","tmp","textContent","identifyPicUrl","input","url","style","color","body","appendChild","getComputedStyle","identifyCardBackgroundColour","empty1","empty2","parseDate","endRange","getTermDate","day","to12","t","h","hh","mins","dd","singleTemplate","dualTemplate","weekHtml","weekReplace","dateObj","startWeek","dayOfWeek","d","dayToNum","tuesday","tue","wednesday","wed","thursday","thu","friday","fri","saturday","sat","sunday","sun","charAt","toUpperCase","substr","setDate","getDate","getMonth","getFullYear"],"mappings":"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","file":"cards.js","sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const TERM_DATES = {\n\n  // OUA 2021 Study Period 1\n  2211: {\n    0: { start: '2021-02-22', stop: '2021-02-28' },\n    1: { start: '2021-03-01', stop: '2021-03-07' },\n    2: { start: '2021-03-08', stop: '2021-03-14' },\n    3: { start: '2021-03-15', stCop: '2021-03-21' },\n    4: { start: '2021-03-22', stop: '2021-03-28' },\n    5: { start: '2021-03-29', stop: '2021-04-04' },\n    6: { start: '2021-04-05', stop: '2021-04-11' },\n    7: { start: '2021-04-12', stop: '2021-04-18' },\n    8: { start: '2021-04-19', stop: '2021-04-25' },\n    9: { start: '2021-04-26', stop: '2021-05-02' },\n    10: { start: '2021-05-03', stop: '2021-05-09' },\n    11: { start: '2021-05-10', stop: '2021-05-16' },\n    12: { start: '2021-05-17', stop: '2021-05-23' },\n    13: { start: '2021-05-24', stop: '2021-05-30' },\n    14: { start: '2021-05-31', stop: '2021-06-06' },\n    /* End of study period 4 */\n    exam: { start: '2021-05-31', stop: '2021-06-06' },\n    // No exam ?? \"exam\" : { \"start\": \"2019-10-10\", \"stop\" : \"2019-10-19\" }\n  },\n  // OUA 2021 Study Period 2\n  2213: {\n    0: { start: '2021-05-31', stop: '2021-06-06' },\n    1: { start: '2021-06-07', stop: '2021-06-13' },\n    2: { start: '2021-06-14', stop: '2021-06-20' },\n    3: { start: '2021-06-21', stop: '2021-06-27' },\n    4: { start: '2021-06-28', stop: '2021-07-04' },\n    5: { start: '2021-07-05', stop: '2021-07-11' },\n    6: { start: '2021-07-12', stop: '2021-07-18' },\n    7: { start: '2021-07-19', stop: '2021-07-25' },\n    8: { start: '2021-07-26', stop: '2021-08-01' },\n    9: { start: '2021-08-02', stop: '2021-08-08' },\n    10: { start: '2021-08-09', stop: '2021-08-15' },\n    11: { start: '2021-08-16', stop: '2021-08-22' },\n    12: { start: '2021-08-23', stop: '2021-08-29' },\n    13: { start: '2021-08-30', stop: '2021-09-05' },\n    /* End of study period 4 */\n    exam: { start: '2021-08-30', stop: '2021-09-05' },\n    // No exam ?? \"exam\" : { \"start\": \"2019-10-10\", \"stop\" : \"2019-10-19\" }\n  },\n  // OUA 2021 Study Period 3\n  2215: {\n    0: { start: '2021-08-23', stop: '2021-08-29' },\n    1: { start: '2021-08-30', stop: '2021-09-05' },\n    2: { start: '2021-09-06', stop: '2021-09-12' },\n    3: { start: '2021-09-13', stop: '2021-09-19' },\n    4: { start: '2021-09-20', stop: '2021-09-26' },\n    5: { start: '2021-09-27', stop: '2021-10-03' },\n    6: { start: '2021-10-04', stop: '2021-10-10' },\n    7: { start: '2021-10-11', stop: '2021-10-17' },\n    8: { start: '2021-10-18', stop: '2021-10-24' },\n    9: { start: '2021-10-25', stop: '2021-10-31' },\n    10: { start: '2021-11-01', stop: '2021-11-07' },\n    11: { start: '2021-11-08', stop: '2021-11-14' },\n    12: { start: '2021-11-15', stop: '2021-11-21' },\n    13: { start: '2021-11-22', stop: '2021-11-28' },\n    14: { start: '2021-11-29', stop: '2021-12-05' },\n    /* End of study period 4 */\n    exam: { start: '2021-11-29', stop: '2021-12-05' },\n    // No exam ?? \"exam\" : { \"start\": \"2019-10-10\", \"stop\" : \"2019-10-19\" }\n  },\n  // OUA 2021 Study Period 4\n  // TODO Yet to be added\n  // Griffith 2021 Trimester 3\n  3218: {\n    0: { start: '2021-11-01', stop: '2021-11-07' },\n    1: { start: '2021-11-08', stop: '2021-11-14' },\n    2: { start: '2021-11-15', stop: '2021-11-21' },\n    3: { start: '2021-11-22', stop: '2021-11-28' },\n    4: { start: '2021-11-29', stop: '2021-12-05' },\n    5: { start: '2021-12-06', stop: '2021-12-12' },\n    6: { start: '2021-12-13', stop: '2021-12-19' },\n    7: { start: '2021-12-20', stop: '2021-12-26' },\n    8: { start: '2022-01-10', stop: '2022-01-16' },\n    9: { start: '2022-01-17', stop: '2022-01-23' },\n    10: { start: '2022-01-24', stop: '2022-01-30' },\n    11: { start: '2022-01-31', stop: '2022-01-06' },\n    12: { start: '2022-02-07', stop: '2022-02-13' },\n    13: { start: '2022-02-14', stop: '2022-02-20' },\n    14: { start: '2022-02-21', stop: '2022-02-27' },\n    15: { start: '2022-02-28', stop: '2022-03-06' },\n    exam: { start: '2022-02-17', stop: '2022-02-26' },\n  },\n  // Griffith 2021 Trimester 2\n  3215: {\n    0: { start: '2021-07-12', stop: '2021-07-18' },\n    1: { start: '2021-07-19', stop: '2021-07-25' },\n    2: { start: '2021-07-26', stop: '2021-08-01' },\n    3: { start: '2021-08-02', stop: '2021-08-08' },\n    4: { start: '2021-08-16', stop: '2021-08-22' },\n    5: { start: '2021-08-23', stop: '2021-08-29' },\n    6: { start: '2021-08-30', stop: '2021-09-05' },\n    7: { start: '2021-09-06', stop: '2021-09-12' },\n    8: { start: '2021-09-13', stop: '2021-09-19' },\n    9: { start: '2021-09-20', stop: '2021-09-26' },\n    10: { start: '2021-09-27', stop: '2021-10-03' },\n    11: { start: '2021-10-04', stop: '2021-10-10' },\n    12: { start: '2021-10-11', stop: '2021-10-17' },\n    13: { start: '2021-10-18', stop: '2021-10-24' },\n    14: { start: '2021-10-25', stop: '2021-10-31' },\n    15: { start: '2021-11-01', stop: '2021-11-07' },\n    exam: { start: '2021-10-21', stop: '2021-10-31' },\n  },\n  // Griffith 2021 Trimester 1\n  3211: {\n    0: { start: '2021-03-01', stop: '2021-03-07' },\n    1: { start: '2021-03-08', stop: '2021-03-14' },\n    2: { start: '2021-03-15', stop: '2021-03-21' },\n    3: { start: '2021-03-22', stop: '2021-03-29' },\n    4: { start: '2021-03-29', stop: '2021-04-04' },\n    5: { start: '2021-04-12', stop: '2021-03-18' },\n    6: { start: '2021-04-19', stop: '2021-04-25' },\n    7: { start: '2021-04-26', stop: '2021-05-02' },\n    8: { start: '2021-05-03', stop: '2021-05-09' },\n    9: { start: '2021-05-10', stop: '2021-05-16' },\n    10: { start: '2021-05-17', stop: '2021-05-23' },\n    11: { start: '2021-05-24', stop: '2021-05-30' },\n    12: { start: '2021-05-31', stop: '2021-06-06' },\n    13: { start: '2021-06-07', stop: '2021-06-13' },\n    14: { start: '2021-06-14', stop: '2021-06-20' },\n    15: { start: '2021-06-21', stop: '2021-06-27' },\n    exam: { start: '2021-06-10', stop: '2021-06-19' },\n  },\n  // QCM 2021 Trimester 2\n  '3215QCM': {\n    0: { start: '2021-07-12', stop: '2021-07-18' },\n    1: { start: '2021-07-19', stop: '2021-07-25' },\n    2: { start: '2021-07-26', stop: '2021-08-01' },\n    3: { start: '2021-08-02', stop: '2021-08-08' },\n    4: { start: '2021-08-09', stop: '2021-08-15' },\n    5: { start: '2021-08-16', stop: '2021-08-22' },\n    6: { start: '2021-08-30', stop: '2021-09-05' },\n    7: { start: '2021-09-06', stop: '2021-09-12' },\n    8: { start: '2021-09-13', stop: '2021-09-19' },\n    9: { start: '2021-09-20', stop: '2021-09-26' },\n    10: { start: '2021-10-04', stop: '2021-10-10' },\n    11: { start: '2021-10-11', stop: '2021-10-17' },\n    12: { start: '2021-10-18', stop: '2021-10-24' },\n    13: { start: '2021-10-25', stop: '2021-10-31' },\n    14: { start: '2021-11-01', stop: '2021-11-07' },\n    15: { start: '2021-11-08', stop: '2021-11-14' },\n    exam: { start: '2021-10-30', stop: '2021-11-13' },\n  },\n  // QCM 2021 Trimester 1\n  '3211QCM': {\n    0: { start: '2021-02-22', stop: '2021-02-28' },\n    1: { start: '2021-03-01', stop: '2021-03-07' },\n    2: { start: '2021-03-08', stop: '2021-03-14' },\n    3: { start: '2021-03-15', stop: '2021-03-21' },\n    4: { start: '2021-03-22', stop: '2021-03-29' },\n    5: { start: '2021-03-29', stop: '2021-04-04' },\n    6: { start: '2021-04-12', stop: '2021-03-18' },\n    7: { start: '2021-04-19', stop: '2021-04-25' },\n    8: { start: '2021-04-26', stop: '2021-05-02' },\n    9: { start: '2021-05-10', stop: '2021-05-16' },\n    10: { start: '2021-05-17', stop: '2021-05-23' },\n    11: { start: '2021-05-24', stop: '2021-05-30' },\n    12: { start: '2021-05-31', stop: '2021-06-06' },\n    13: { start: '2021-06-07', stop: '2021-03-13' },\n    14: { start: '2021-06-14', stop: '2021-03-20' },\n    15: { start: '2021-06-21', stop: '2021-03-26' },\n    exam: { start: '2021-06-12', stop: '2021-06-26' },\n  },\n\n  // OUA 2020 Study Period 1\n  2201: {\n    0: { start: '2020-02-24', stop: '2020-03-01' },\n    1: { start: '2020-03-02', stop: '2020-03-08' },\n    2: { start: '2020-03-09', stop: '2020-03-15' },\n    3: { start: '2020-03-16', stCop: '2020-03-22' },\n    4: { start: '2020-03-23', stop: '2020-03-29' },\n    5: { start: '2020-03-30', stop: '2020-04-05' },\n    6: { start: '2020-04-06', stop: '2020-04-12' },\n    7: { start: '2020-04-13', stop: '2020-04-19' },\n    8: { start: '2020-04-20', stop: '2020-04-26' },\n    9: { start: '2020-04-27', stop: '2020-05-03' },\n    10: { start: '2020-05-04', stop: '2020-05-10' },\n    11: { start: '2020-05-11', stop: '2020-05-17' },\n    12: { start: '2020-05-18', stop: '2020-05-24' },\n    13: { start: '2020-05-25', stop: '2020-05-31' },\n    14: { start: '2020-06-01', stop: '2020-06-05' },\n    /* End of study period 4 */\n    exam: { start: '2020-06-01', stop: '2020-06-05' },\n    // No exam ?? \"exam\" : { \"start\": \"2019-10-10\", \"stop\" : \"2019-10-19\" }\n  },\n  // OUA 2020 Study Period 2\n  2203: {\n    0: { start: '2020-05-25', stop: '2020-05-31' },\n    1: { start: '2020-06-01', stop: '2020-06-07' },\n    2: { start: '2020-06-08', stop: '2020-06-14' },\n    3: { start: '2020-06-15', stop: '2020-06-21' },\n    4: { start: '2020-06-22', stop: '2020-06-28' },\n    5: { start: '2020-06-29', stop: '2020-07-05' },\n    6: { start: '2020-07-06', stop: '2020-07-12' },\n    7: { start: '2020-07-13', stop: '2020-07-19' },\n    8: { start: '2020-07-20', stop: '2020-07-26' },\n    9: { start: '2020-07-27', stop: '2020-08-02' },\n    10: { start: '2020-08-03', stop: '2020-08-09' },\n    11: { start: '2020-08-10', stop: '2020-05-17' },\n    12: { start: '2020-08-17', stop: '2020-05-24' },\n    13: { start: '2020-08-24', stop: '2020-05-31' },\n    14: { start: '2020-08-31', stop: '2020-09-06' },\n    /* End of study period 4 */\n    exam: { start: '2020-08-31', stop: '2020-09-04' },\n    // No exam ?? \"exam\" : { \"start\": \"2019-10-10\", \"stop\" : \"2019-10-19\" }\n  },\n  // OUA 2020 Study Period 3\n  2205: {\n    0: { start: '2020-08-24', stop: '2020-09-30' },\n    1: { start: '2020-08-31', stop: '2020-09-06' },\n    2: { start: '2020-09-07', stop: '2020-09-13' },\n    3: { start: '2020-09-14', stop: '2020-09-20' },\n    4: { start: '2020-09-21', stop: '2020-09-27' },\n    5: { start: '2020-09-28', stop: '2020-10-04' },\n    6: { start: '2020-10-05', stop: '2020-10-11' },\n    7: { start: '2020-10-12', stop: '2020-10-19' },\n    8: { start: '2020-10-19', stop: '2020-10-25' },\n    9: { start: '2020-10-26', stop: '2020-11-01' },\n    10: { start: '2020-11-02', stop: '2020-11-08' },\n    11: { start: '2020-11-09', stop: '2020-11-15' },\n    12: { start: '2020-11-16', stop: '2020-11-22' },\n    13: { start: '2020-11-23', stop: '2020-11-29' },\n    14: { start: '2020-11-30', stop: '2020-12-06' },\n    15: { start: '2020-12-07', stop: '2020-12-13' },\n    /* End of study period 4 */\n    exam: { start: '2020-12-07', stop: '2020-12-13' },\n    // No exam ?? \"exam\" : { \"start\": \"2019-10-10\", \"stop\" : \"2019-10-19\" }\n  },\n  // OUA 2020 Study Period 4\n  2207: {\n    0: { start: '2020-11-23', stop: '2020-11-29' },\n    1: { start: '2020-11-30', stop: '2020-12-06' },\n    2: { start: '2020-12-07', stop: '2020-12-13' },\n    3: { start: '2020-12-14', stop: '2020-12-20' },\n    4: { start: '2020-12-21', stop: '2020-12-27' },\n    5: { start: '2020-12-28', stop: '2021-01-03' },\n    6: { start: '2021-01-04', stop: '2021-01-10' },\n    7: { start: '2021-01-11', stop: '2021-01-17' },\n    8: { start: '2021-01-18', stop: '2021-01-24' },\n    9: { start: '2021-01-25', stop: '2021-01-31' },\n    10: { start: '2021-02-01', stop: '2021-02-07' },\n    11: { start: '2021-02-08', stop: '2021-02-14' },\n    12: { start: '2021-02-15', stop: '2021-02-21' },\n    13: { start: '2021-02-22', stop: '2021-02-28' },\n    14: { start: '2021-03-01', stop: '2021-03-07' },\n    15: { start: '2021-03-08', stop: '2021-03-14' },\n    /* End of study period 4 */\n    exam: { start: '2021-03-01', stop: '2021-03-07' },\n    // No exam ?? \"exam\" : { \"start\": \"2019-10-10\", \"stop\" : \"2019-10-19\" }\n  },\n  // Griffith 2020 Trimester 3\n  3208: {\n    0: { start: '2020-10-26', stop: '2020-11-01' },\n    1: { start: '2020-11-02', stop: '2020-11-08' },\n    2: { start: '2020-11-09', stop: '2020-11-15' },\n    3: { start: '2020-11-16', stop: '2020-11-22' },\n    4: { start: '2020-11-23', stop: '2020-11-29' },\n    5: { start: '2020-11-30', stop: '2020-12-06' },\n    6: { start: '2020-12-07', stop: '2020-12-13' },\n    7: { start: '2020-12-14', stop: '2020-12-20' },\n    8: { start: '2021-01-04', stop: '2021-01-10' },\n    9: { start: '2021-01-11', stop: '2021-01-17' },\n    10: { start: '2021-01-18', stop: '2021-01-24' },\n    11: { start: '2021-01-25', stop: '2021-01-31' },\n    12: { start: '2021-02-01', stop: '2021-02-07' },\n    13: { start: '2021-02-08', stop: '2021-02-14' },\n    exam: { start: '2021-02-08', stop: '2021-02-20' },\n  },\n  // Griffith 2020 Trimester 2\n  3205: {\n    0: { start: '2020-07-06', stop: '2020-07-12' },\n    1: { start: '2020-07-13', stop: '2020-07-19' },\n    2: { start: '2020-07-20', stop: '2020-08-26' },\n    3: { start: '2020-07-27', stop: '2020-08-02' },\n    4: { start: '2020-08-03', stop: '2020-08-16' },\n    5: { start: '2020-08-17', stop: '2020-08-23' },\n    6: { start: '2020-08-24', stop: '2020-08-30' },\n    7: { start: '2020-08-31', stop: '2020-09-06' },\n    8: { start: '2020-09-07', stop: '2020-09-13' },\n    9: { start: '2020-09-14', stop: '2020-09-20' },\n    10: { start: '2020-09-21', stop: '2020-09-27' },\n    11: { start: '2020-09-28', stop: '2020-10-04' },\n    12: { start: '2020-10-05', stop: '2020-10-11' },\n    13: { start: '2020-10-12', stop: '2020-10-18' },\n    14: { start: '2020-10-19', stop: '2020-10-25' },\n    15: { start: '2020-10-27', stop: '2020-11-01' },\n    exam: { start: '2020-10-12', stop: '2020-10-18' },\n  },\n  // Griffith 2020 Trimester 1\n  3201: {\n    0: { start: '2020-02-17', stop: '2020-02-23' },\n    1: { start: '2020-02-24', stop: '2020-03-01' },\n    2: { start: '2020-03-02', stop: '2020-03-08' },\n    3: { start: '2020-03-09', stop: '2020-03-15' },\n    4: { start: '2020-03-16', stop: '2020-03-22' },\n    5: { start: '2020-03-23', stop: '2020-03-29' },\n    6: { start: '2020-03-30', stop: '2020-04-05' },\n    7: { start: '2020-04-13', stop: '2020-04-19' },\n    8: { start: '2020-04-20', stop: '2020-04-26' },\n    9: { start: '2020-04-27', stop: '2020-05-03' },\n    10: { start: '2020-05-04', stop: '2020-05-10' },\n    11: { start: '2020-05-11', stop: '2020-05-17' },\n    12: { start: '2020-05-18', stop: '2020-05-24' },\n    13: { start: '2020-05-25', stop: '2020-05-31' },\n    exam: { start: '2020-06-01', stop: '2020-06-07' },\n  },\n  // Griffith 2019 Trimester 3\n  3198: {\n    0: { start: '2019-10-21', stop: '2019-10-27' },\n    1: { start: '2019-10-28', stop: '2019-11-03' },\n    2: { start: '2019-11-04', stop: '2019-11-10' },\n    3: { start: '2019-11-11', stop: '2019-11-17' },\n    4: { start: '2019-11-18', stop: '2019-11-24' },\n    5: { start: '2019-11-25', stop: '2019-12-1' },\n    6: { start: '2019-12-02', stop: '2019-12-08' },\n    7: { start: '2019-12-09', stop: '2019-12-15' },\n    8: { start: '2019-12-16', stop: '2019-12-22' },\n    9: { start: '2020-01-06', stop: '2020-01-12' },\n    10: { start: '2020-01-13', stop: '2020-01-19' },\n    11: { start: '2020-01-20', stop: '2020-01-26' },\n    12: { start: '2020-01-27', stop: '2020-02-02' },\n    13: { start: '2020-02-03', stop: '2020-02-09' },\n    exam: { start: '2020-02-06', stop: '2020-02-15' },\n    // No exam ?? \"exam\" : { \"start\": \"2019-10-10\", \"stop\" : \"2019-10-19\" }\n  },\n  // OUA Study Period 4 2019\n  2197: {\n    0: { start: '2019-11-18', stop: '2019-11-24' },\n    1: { start: '2019-11-25', stop: '2019-12-01' },\n    2: { start: '2019-12-02', stop: '2019-12-08' },\n    3: { start: '2019-12-09', stop: '2019-12-15' },\n    4: { start: '2019-12-16', stop: '2019-12-22' },\n    5: { start: '2019-12-23', stop: '2019-09-29' },\n    6: { start: '2019-12-30', stop: '2020-01-05' },\n    7: { start: '2020-01-06', stop: '2020-01-12' },\n    8: { start: '2020-01-13', stop: '2020-01-19' },\n    9: { start: '2020-01-20', stop: '2020-01-26' },\n    10: { start: '2020-01-27', stop: '2020-02-02' },\n    11: { start: '2020-02-03', stop: '2020-02-09' },\n    12: { start: '2020-02-10', stop: '2020-02-16' },\n    13: { start: '2019-02-17', stop: '2020-02-23' },\n    /* End of study period 4 */\n    14: { start: '2020-02-24', stop: '2020-03-01' },\n    15: { start: '2020-03-02', stop: '2020-03-08' },\n    // No exam ?? \"exam\" : { \"start\": \"2019-10-10\", \"stop\" : \"2019-10-19\" }\n  },\n  // OUA Study Period 3 2019\n  2195: {\n    0: { start: '2019-08-19', stop: '2019-09-25' },\n    1: { start: '2019-08-26', stop: '2019-09-01' },\n    2: { start: '2019-09-02', stop: '2019-09-18' },\n    3: { start: '2019-09-09', stop: '2019-09-15' },\n    4: { start: '2019-09-16', stop: '2019-09-22' },\n    5: { start: '2019-09-23', stop: '2019-09-29' },\n    6: { start: '2019-09-30', stop: '2019-10-06' },\n    7: { start: '2019-10-07', stop: '2019-10-13' },\n    8: { start: '2019-10-14', stop: '2019-08-20' },\n    9: { start: '2019-10-21', stop: '2019-10-27' },\n    10: { start: '2019-10-28', stop: '2019-11-03' },\n    11: { start: '2019-11-04', stop: '2019-11-10' },\n    12: { start: '2019-11-11', stop: '2019-11-17' },\n    13: { start: '2019-11-18', stop: '2019-11-24' },\n    /* End of study period 3 */\n    14: { start: '2019-11-25', stop: '2019-12-01' },\n    15: { start: '2019-10-07', stop: '2019-10-13' },\n    // No exam ?? \"exam\" : { \"start\": \"2019-10-10\", \"stop\" : \"2019-10-19\" }\n  },\n  // Griffith 2019 Trimester 2\n  3195: {\n    0: { start: '2019-07-01', stop: '2019-07-07' },\n    1: { start: '2019-07-08', stop: '2019-07-14' },\n    2: { start: '2019-07-15', stop: '2019-07-21' },\n    3: { start: '2019-07-22', stop: '2019-07-28' },\n    4: { start: '2019-07-29', stop: '2019-08-04' },\n    5: { start: '2019-08-05', stop: '2019-08-11' },\n    6: { start: '2019-08-19', stop: '2019-08-25' },\n    7: { start: '2019-08-26', stop: '2019-09-01' },\n    8: { start: '2019-09-02', stop: '2019-09-08' },\n    9: { start: '2019-09-09', stop: '2019-09-15' },\n    10: { start: '2019-09-16', stop: '2019-09-22' },\n    11: { start: '2019-09-23', stop: '2019-09-29' },\n    12: { start: '2019-09-30', stop: '2019-10-06' },\n    13: { start: '2019-10-07', stop: '2019-10-13' },\n    14: { start: '2019-10-14', stop: '2019-10-20' },\n    15: { start: '2019-10-21', stop: '2019-10-27' },\n    exam: { start: '2019-10-10', stop: '2019-10-19' },\n  },\n  3191: {\n    0: { start: '2019-02-18', stop: '2019-02-24' },\n    1: { start: '2019-02-25', stop: '2019-03-03' },\n    2: { start: '2019-03-04', stop: '2019-03-10' },\n    3: { start: '2019-03-11', stop: '2019-03-17' },\n    4: { start: '2019-03-18', stop: '2019-03-24' },\n    5: { start: '2019-03-25', stop: '2019-03-31' },\n    6: { start: '2019-04-01', stop: '2019-04-07' },\n    7: { start: '2019-04-08', stop: '2019-04-14' },\n    8: { start: '2019-04-22', stop: '2019-04-28' },\n    9: { start: '2019-04-29', stop: '2019-05-05' },\n    10: { start: '2019-05-06', stop: '2019-05-12' },\n    11: { start: '2019-05-13', stop: '2019-05-19' },\n    12: { start: '2019-05-20', stop: '2019-05-26' },\n    13: { start: '2019-05-27', stop: '2019-06-02' },\n    14: { start: '2019-06-03', stop: '2019-06-09' },\n    15: { start: '2019-06-10', stop: '2019-06-17' },\n    exam: { start: '2019-05-30', stop: '2019-06-08' },\n  },\n\n};\n\nexport default TERM_DATES;\n","/* eslint-disable vars-on-top */\n/* eslint-disable object-property-newline */\n/* eslint-disable indent */\n/* eslint-disable no-var */\n/* cardsInterface\n * - Given a Blackboard page with a list of items\n * - Find all the items using the expected card data format\n * - Insert into the first item on the page a cards interface\n\n * data format\n * - Card's indicating by \"Card Image: URL\" in the description, though the URL can be empty\n * - Card title - heading of Blackboard item\n * - Card Label - Specify the label to apply to the card (default Module)\n * - Module number - just the order in which they appear in the list\n * - picture - heading includes Card Image:**url** OR inserted image with title\n *   attribute = 'Card Image'\n * - description - the rest of the description\n * - DATE\n *   - Card Date: Mar 5\n *     Specify the date to be displayed\n *   - Card Date Label: Due\n *     Specify the label for the date - default Commencing\n */\n\nimport TERM_DATES from './term-dates';\n\n// TERM/YEAR specify default period\n// SET_DATE is used for testing activePic, specify a date strong for now\nvar TERM = '2207';\nvar DEFAULT_YEAR = 2021;\nvar SET_DATE = '';\n\nconst MONTHS = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\nconst MONTHS_HASH = {\n    Jan: 0, January: 0, Feb: 1, February: 1, Mar: 2, March: 2,\n    Apr: 3, April: 3, May: 4, Jun: 5, June: 5, Jul: 6, July: 6, Aug: 7, August: 7,\n    Sep: 8, September: 8, Oct: 9, October: 9, Nov: 10, November: 10, Dec: 11,\n    December: 11,\n};\n\n// kludge to parse card image when Blackboard inserts one of its icons\nconst BBIMG = '/images/ci/icons/cmlink_generic.gif';\n\n// Interface design from https://codepen.io/njs/pen/BVdwZB\n\n// TEMPLATES - by 6\n\n// define the template types\nconst NUM_TEMPLATES = 6;\nconst HORIZONTAL = 0; // original 3 cards per row\nconst VERTICAL = 1; // 1 card per row\nconst HORIZONTAL_NOENGAGE = 2; // original, but no engage\nconst PEOPLE = 5;\nconst ASSESSMENT = 6; // horizontal but show off people (BCI) version\n\n// Whether the images will be hidden\nvar HIDE_IMAGES = false;\n\n// Whether or not xAPI logging is turned on\n// - turned on by adding \"logging\" to Card Interface\nvar LOGGING = false;\n\n// Define the wrapper around the card interface\n\nvar interfaceHtmlTemplate = Array(NUM_TEMPLATES);\n\n// Kludge - hard code CSS path to enable shifting from\n//          dev to live\n// var CARDS_CSS=\"https://djon.es/gu/cards.css\";\nvar CARDS_CSS = 'https://s3.amazonaws.com/filebucketdave/banner.js/cards.css';\n\ninterfaceHtmlTemplate[HORIZONTAL] = `\n<link rel=\"stylesheet\" href=\"{CARDS_CSS}\" />\n\n\n<div id=\"guCardInterface\" class=\"flex flex-wrap -m-3\">\n {CARDS}\n</div>\n`;\ninterfaceHtmlTemplate[HORIZONTAL] = interfaceHtmlTemplate[HORIZONTAL].replace('{CARDS_CSS}', CARDS_CSS);\n\ninterfaceHtmlTemplate[VERTICAL] = `\n<link rel=\"stylesheet\" href=\"{CARDS_CSS}\" />\n {CARDS}\n</div>\n`;\ninterfaceHtmlTemplate[VERTICAL] = interfaceHtmlTemplate[VERTICAL].replace('{CARDS_CSS}', CARDS_CSS);\n\ninterfaceHtmlTemplate[HORIZONTAL_NOENGAGE] = interfaceHtmlTemplate[HORIZONTAL];\ninterfaceHtmlTemplate[PEOPLE] = interfaceHtmlTemplate[HORIZONTAL];\ninterfaceHtmlTemplate[ASSESSMENT] = interfaceHtmlTemplate[HORIZONTAL];\n\n// template for each individual card\n\nvar cardHtmlTemplate = Array(NUM_TEMPLATES);\n\n// the extract string for the hovers is used in a replace\n//  Don't change it (Kludegy)\ncardHtmlTemplate[HORIZONTAL] = `\n  <div class=\"clickablecard w-full sm:w-1/2 {WIDTH} flex flex-col p-3\">\n    <div class=\"hover:outline-none hover:shadow-outline bg-white rounded-lg shadow-lg overflow-hidden flex-1 flex flex-col relative\"> <!-- Relative could go -->\n      <a href=\"{LINK}\" class=\"cardmainlink\"></a>\n      <div class=\"{BG_SIZE} h-48\" style=\"background-image: url('{PIC_URL}'); background-color: rgb(255,255,255)\">{IFRAME}\n      </div>\n      {COMING_SOON}\n      <div class=\"carddescription p-4 flex-1 flex flex-col\">\n        <span class=\"cardLabel\">\n        {LABEL} {MODULE_NUM}\n        </span>\n        <h3 class=\"mb-4 text-2xl\">{TITLE}</h3>\n        <div class=\"mb-4 flex-1\">\n          {DESCRIPTION}\n          \n        </div>\n         \n         {LINK_ITEM}\n         {REVIEW_ITEM}\n         {EDIT_ITEM}\n         {DATE} \n      </div>\n    </div>\n  </div>\n`;\n\ncardHtmlTemplate[VERTICAL] = `\n<a href=\"{LINK}\">\n<div class=\"lg:flex xl:flex md:flex mb-4 rounded-lg shadow-lg hover:shadow-outline\">\n  <div class=\"lg:w-1/4 md:w-1/4 sm:w-full h-auto lg:flex-none bg-cover bg-center rounded-t lg:rounded-t-none lg:rounded-l text-center overflow-hidden\" style=\"background-image: url('{PIC_URL}')\">\n        <img src=\"{PIC_URL}\" style=\"opacity:0;width:50%\" />\n        {IFRAME}\n  </div>\n    <div class=\"p-2 m-2 lg:flex md:w-1/5 lg:w-1/5 sm:w-full\">\n        <h3>{TITLE}</h3>\n    </div>\n    {COMING_SOON}\n    <div class=\"carddescription m-2 p-2 lg:flex-initial md:w-1/2 lg:w-1/2 sm:w-full\">\n      <p class=\"text-grey-darker text-base\">\n        {DESCRIPTION} \n      </p>\n      {LINK_ITEM}\n      {EDIT_ITEM}\n    </div>\n</div>\n</a>\n`;\n\ncardHtmlTemplate[HORIZONTAL_NOENGAGE] = `\n  <div class=\"clickablecard w-full sm:w-1/2 {WIDTH} flex flex-col p-3\">\n    <div class=\"hover:outline-none hover:shadow-outline bg-white rounded-lg shadow-lg overflow-hidden flex-1 flex flex-col relative\"> <!-- Relative could go -->\n    <a href=\"{LINK}\" class=\"cardmainlink\"></a>\n      <div class=\"{BG_SIZE} h-48\" style=\"background-image: url('{PIC_URL}');\">\n          {IFRAME}\n      </div>\n      {COMING_SOON}\n      <div class=\"p-4 flex-1 flex flex-col\">\n        <span class=\"cardLabel\"> \n        {LABEL} {MODULE_NUM}\n        </span>\n        <h3 class=\"mb-4 text-2xl\">{TITLE}</h3>\n        <div class=\"carddescription mb-4 flex-1\">\n          {DESCRIPTION}\n        </div>\n         {DATE} \n         {LINK_ITEM}\n         {REVIEW_ITEM}\n         {EDIT_ITEM}\n      </div>\n    </div>\n  </div>\n`;\n\n// TODO - this might not be a better fit as something not a template?\n\ncardHtmlTemplate[PEOPLE] = `\n<!-- <style>\n  .codegena{position:relative;width:100%;height:0;padding-bottom:56.27198%;\n  .codegena iframe{position:absolute;top:0;left:0;width:100%;height:100%;}\n</style>-->\n  \n  \n  <div class=\"clickablecard w-full sm:w-1/2 md:w-1/2 flex flex-col p-3\">\n    <div class=\"hover:outline-none hover:shadow-outline bg-white rounded-lg shadow-lg overflow-hidden flex-1 flex flex-col relative\"> <!-- Relative could go -->\n      <a href=\"{LINK}\" class=\"cardmainlink\"></a>\n      <div class=\"w-full\"><iframe src='https://player.vimeo.com/video/226525600?&title=0&byline=0'></iframe></div></a>\n      <div class=\"p-4 flex-1 flex flex-col\">\n       <a href=\"{LINK}\">\n        <span class=\"cardLabel\">\n        {LABEL} {MODULE_NUM}\n        </span>\n        <h3 class=\"mb-4 text-2xl\">{TITLE}</h3>\n        <div class=\"carddescription mb-4 flex-1\">\n          {DESCRIPTION}\n          \n        </div>\n        </a>\n         {LINK_ITEM}\n         {EDIT_ITEM}\n         {DATE} \n      </div>\n    </div>\n  </div>\n`;\n\n// Implement the assessment template\n\ncardHtmlTemplate[ASSESSMENT] = `\n<div class=\"clickablecard lg:max-w-full w-full lg:flex xl:flex md:flex mb-6 rounded-lg shadow-lg hover:shadow-outline\"> \n    <!-- padding kludge -->\n    <!-- <div>&nbsp;</div> -->\n    <div class=\"h-auto\">\n          <a href=\"{LINK}\" class=\"cardmainlink\"></a>\n          <h1 class=\"mt-2 ml-2 font-extrabold rounded-full h-16 w-16 flex items-center justify-center border-2 border-black bg-red text-white \">{MODULE_NUM}</h1>\n          <p class=\"text-xs p-2 pr-6\">Weight: <span class=\"font-bold\">{WEIGHTING}</p>\n        \n        <!-- date -->\n        {DATE}\n        \n    </div>\n    <div class=\"m-2\">&nbsp;</div>\n    {COMING_SOON}\n    <div class=\"carddescription m-2\">\n          <div class=\"mb-4\">\n<h3 class=\"font-bold\">{TITLE}</h3>\n<p class=\"text-sm\">{ASSESSMENT_TYPE}</p>\n<p class=\"text-sm\">Learning outcomes: {LEARNING_OUTCOMES}</p>\n </div>\n \n {DESCRIPTION}\n \n {LINK_ITEM}\n {EDIT_ITEM}\n \n</div>\n</div>\n`;\n\n// template to add the \"ENGAGE\" link to (more strongly) indicate that the card links somewhere\n\nvar linkItemHtmlTemplate = Array(NUM_TEMPLATES);\n\nlinkItemHtmlTemplate[HORIZONTAL] = `\n        <p>&nbsp;<br /> &nbsp;</p>\n        <div class=\"p-4 absolute pin-r pin-b\">\n           <a href=\"{LINK}\" class=\"gu-engage\"><div class=\"hover:bg-blue text-blue-dark font-semibold hover:text-white py-2 px-4 border border-blue hover:border-transparent rounded\">\n            {ENGAGE}\n        </div></a>\n        </div>\n        `;\n\nlinkItemHtmlTemplate[VERTICAL] = '';\nlinkItemHtmlTemplate[HORIZONTAL_NOENGAGE] = '';\nlinkItemHtmlTemplate[PEOPLE] = '';\nlinkItemHtmlTemplate[ASSESSMENT] = '';\n\n// TODO: need to decide how and what this will look like\n// linkItemHtmlTemplate[1] = '<p><strong>Engage</strong></p>';\nlinkItemHtmlTemplate[VERTICAL] = '';\n\n//* ****************************************************************\n// Templates for the \"Mark Review\" and \"Reviewed\" features\n\nvar markReviewLinkHtmlTemplate = Array(NUM_TEMPLATES);\nvar markUnReviewedLinkHtmlTemplate = Array(NUM_TEMPLATES);\n\nmarkReviewLinkHtmlTemplate[HORIZONTAL] = `\n<div class=\"p-4 absolute pin-l pin-b\">\n     <a href=\"{LINK}\"><button class=\"bg-transparent hover:bg-blue text-blue-dark font-semibold hover:text-white py-2 px-4 border border-blue hover:border-transparent rounded\">\n     <span class=\"font-bold rounded-full px-2 py-1 bg-yellow text-black\">&#x26a0;</span>&nbsp; {MARK_REVIEWED}</button></a>\n</div>\n        `;\n\nmarkUnReviewedLinkHtmlTemplate[HORIZONTAL] = `\n<div class=\"p-4 absolute pin-l pin-b\">\n    <a href=\"{LINK}\"><button class=\"bg-transparent hover:bg-blue text-blue-dark font-semibold hover:text-white py-2 px-4 border border-blue hover:border-transparent rounded\">\n                    <span class=\"font-bold rounded-full px-2 py-1 bg-green text-white\">&#10003;</span>&nbsp;{REVIEWED}</button></a>\n</div>\n`;\n\nmarkReviewLinkHtmlTemplate[VERTICAL] = '';\nmarkUnReviewedLinkHtmlTemplate[VERTICAL] = '';\nmarkReviewLinkHtmlTemplate[HORIZONTAL_NOENGAGE] = markReviewLinkHtmlTemplate[HORIZONTAL];\nmarkUnReviewedLinkHtmlTemplate[HORIZONTAL_NOENGAGE] = markUnReviewedLinkHtmlTemplate[HORIZONTAL];\nmarkReviewLinkHtmlTemplate[PEOPLE] = '';\nmarkUnReviewedLinkHtmlTemplate[PEOPLE] = '';\nmarkReviewLinkHtmlTemplate[ASSESSMENT] = '';\nmarkUnReviewedLinkHtmlTemplate[ASSESSMENT] = '';\n\n// Template for the calendar/date tab\n\nvar dateHtmlTemplate = Array(NUM_TEMPLATES);\nvar dualDateHtmlTemplate = Array(NUM_TEMPLATES);\n\ndateHtmlTemplate[HORIZONTAL] = `\n<div class=\"block rounded-t rounded-b overflow-hidden bg-white text-center w-24 absolute pin-t pin-r\">\n          <div class=\"bg-black text-white py-1 text-xs border-l border-r border-t border-black\">\n             {DATE_LABEL}\n          </div>\n          {WEEK}\n          <div class=\"bg-red text-white py-1 border-l border-r border-black\">\n      \t     {MONTH}\n          </div>\n          <div class=\"pt-1 border-l border-r border-b border-black rounded-b\">\n      \t     <span class=\"text-2xl font-bold\">{DATE}</span>\n          </div>\n        </div>\n`;\n\ndateHtmlTemplate[ASSESSMENT] = `\n<div class=\"block rounded-t rounded-b overflow-hidden bg-white text-center w-24  pin-b pin-l\"> \n          <div class=\"bg-black text-white py-1 text-xs\">\n             {DATE_LABEL}\n          </div>\n          {WEEK}\n          <div class=\"bg-red text-white py-1\">\n      \t     {MONTH}\n          </div>\n          <div class=\"pt-1 border-l border-r border-b rounded-b\">\n      \t     <span class=\"text-2xl font-bold\">{DATE}</span>\n          </div>\n        </div>\n`;\n\ndualDateHtmlTemplate[HORIZONTAL] = `\n<div class=\"block rounded-t rounded-b overflow-hidden bg-white text-center w-24 absolute pin-t pin-r\">\n          <div class=\"bg-black text-white py-1 text-xs border-l border-r border-black\">\n             {DATE_LABEL}\n          </div>\n          {WEEK}\n          <div class=\"bg-red text-white flex items-stretch py-1 border-l border-r border-black\">\n              <div class=\"w-1/2 flex-grow\">{MONTH_START}</div>\n              <div class=\"flex items-stretch border-l border-black flex-grow  -mt-1 -mb-1\"></div>\n              <div class=\"w-1/2\">{MONTH_STOP}</div>\n          </div>\n          <div class=\"border-l border-r border-b text-center flex border-black items-stretch pt-1\">\n      \t     <div class=\"w-1/2 text-2xl flex-grow font-bold\">{DATE_START}</div>\n      \t     <div class=\"flex font-bolditems-stretch border-l border-black flex-grow -mt-1\"></div>\n              <div class=\"w-1/2 text-2xl font-bold\">{DATE_STOP}</div>\n          </div>\n         </div> \n`;\n\ndualDateHtmlTemplate[ASSESSMENT] = `\n<div class=\"block rounded-t rounded-b overflow-hidden bg-white text-center w-24  pin-b pin-l\">\n          <div class=\"bg-black text-white py-1 text-xs border-l border-r border-t border-black\">\n             {DATE_LABEL}\n          </div>\n          {WEEK}\n          <div class=\"bg-red text-white flex items-stretch py-1 border-l border-r border-black\">\n              <div class=\"w-1/2 flex-grow\">{MONTH_START}</div>\n              <div class=\"flex items-stretch border-l border-black flex-grow  -mt-1 -mb-1\"></div>\n              <div class=\"w-1/2\">{MONTH_STOP}</div>\n          </div>\n          <div class=\"border-l border-r border-b text-center flex border-black items-stretch pt-1 rounded-b\">\n      \t     <div class=\"w-1/2 text-2xl flex-grow font-bold\">{DATE_START}</div>\n      \t     <div class=\"flex font-bolditems-stretch border-l border-black flex-grow -mt-1\"></div>\n              <div class=\"w-1/2 text-2xl font-bold\">{DATE_STOP}</div>\n          </div>\n         </div> \n`;\n\nvar comingSoonHtmlTemplate = Array(NUM_TEMPLATES);\n\ncomingSoonHtmlTemplate[HORIZONTAL] = `\n<div class=\"cardComingSoon p-4 flex bg-yellow-light\"> \n    <span>🚧</span>&nbsp;\n    <span>{COMING_SOON_LABEL} {MONTH} {DATE} ({TIME})</span>\n</div>\n`;\ncomingSoonHtmlTemplate[HORIZONTAL_NOENGAGE] = comingSoonHtmlTemplate[HORIZONTAL];\ncomingSoonHtmlTemplate[PEOPLE] = comingSoonHtmlTemplate[HORIZONTAL_NOENGAGE];\ncomingSoonHtmlTemplate[VERTICAL] = comingSoonHtmlTemplate[HORIZONTAL_NOENGAGE];\n\nvar dualComingSoonHtmlTemplate = Array(NUM_TEMPLATES);\n\ndualComingSoonHtmlTemplate[HORIZONTAL] = `\n<div class=\"cardComingSoon p-4 flex bg-yellow-light\"> \n    <span>🚧</span>&nbsp;\n    <span>{COMING_SOON_LABEL} {MONTH_START} {DATE_START} ({TIME_START})-{MONTH_STOP} {DATE_STOP} ({TIME_STOP})</span>\n</div>\n`;\ndualComingSoonHtmlTemplate[HORIZONTAL_NOENGAGE] = dualComingSoonHtmlTemplate[HORIZONTAL];\ndualComingSoonHtmlTemplate[PEOPLE] = dualComingSoonHtmlTemplate[HORIZONTAL_NOENGAGE];\ndualComingSoonHtmlTemplate[VERTICAL] = dualComingSoonHtmlTemplate[HORIZONTAL_NOENGAGE];\n\n// week templates\n\nvar weekHtmlTemplate = `\n    <div class=\"bg-yellow-lighter text-black py-1\">\n      {WEEK}\n    </div>\n    `;\n\nvar dualWeekHtmlTemplate = `\n    <div class=\"bg-yellow-lighter text-black py-1 border-l border-r border-black\">\n      Week {WEEK_START} to {WEEK_STOP}\n    </div>\n    `;\n\nvar examPeriodTemplate = `\n<div class=\"bg-yellow-lighter text-black py-1 border-l border-r border-black\">\n      Exam Period\n    </div>\n`;\n\ndateHtmlTemplate[VERTICAL] = dateHtmlTemplate[HORIZONTAL];\ndateHtmlTemplate[HORIZONTAL_NOENGAGE] = dateHtmlTemplate[HORIZONTAL];\ndateHtmlTemplate[PEOPLE] = '';\n// dateHtmlTemplate[ASSESSMENT] = dateHtmlTemplate[HORIZONTAL];\n\ndualDateHtmlTemplate[VERTICAL] = dualDateHtmlTemplate[HORIZONTAL];\ndualDateHtmlTemplate[HORIZONTAL_NOENGAGE] = dualDateHtmlTemplate[HORIZONTAL];\ndualDateHtmlTemplate[PEOPLE] = '';\n// dualDateHtmlTemplate[ASSESSMENT] = dualDateHtmlTemplate[HORIZONTAL];\n\n// Template to allow editors to view the original Bb content item\n// Same for all templates\nvar editLinkTemplate = `\n\t        <div class=\"text-xs grey-light\">\n\t           [<a href=\"#{ID}\">View origin</a>]\n\t        </div>`;\n\n// Message to display on a card if EDIT mode on and the item is hidden\nconst HIDDEN_FROM_STUDENTS = '<div class=\"inline-block bg-yellow text-black text-xs rounded-t rounded-b\">This item is <strong>hidden from students</strong></div>';\n\n// LOCATION > 0 means view mode. < 0 means EDIT mode\nvar LOCATION = 1;\n\nconst INTRO_HTML = `\n   <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\">\n\n  <h3>Note</h3>\n\n  <div class=\"mx-auto border-none box-content px-4 py-2\">\n    <div class=\"flex flex-wrap -mx-1 lg:-mx-4 p-0\">\n\n        <div class=\"my-1 px-1 w-full md:w-1/2 lg:my-4 lg:px-4 lg:w-1/3\">\n            <article class=\"overlow-hidden rounded-lg shadow-lg h-full\">\n                <header class=\"flex items-center justify-between leading-tight p-2 md:p-4 border-b\">\n                    <h4>\n                            <i class=\"fa fa-exclamation-triangle text-red\"></i>\n                            Change with care\n                    </h4>\n                </header>\n                <div class=\"p-2 md:p-4\">\n                    <p>Changes to this item may stop the Card Interface from working.</p>\n                </div>\n            </article>\n        </div>\n\n        <div class=\"my-1 px-1 w-full md:w-1/2 lg:my-4 lg:px-4 lg:w-1/3\">\n            <article class=\"overlow-hidden rounded-lg shadow-lg h-full\">\n                <header class=\"flex items-center justify-between leading-tight p-2 md:p-4 border-b\">\n                    <h4>\n                            <i class=\"fa fa-exclamation-triangle text-red\"></i>\n                            Do not hide <a target=\"_blank\" href=\"https://raw.githubusercontent.com/djplaner/Card-Interface-Tweak/master/tweak.js\">the tweak code</a>\n                    </h4>\n                </header>\n                <div class=\"p-2 md:p-4\">\n                    <p>If this item is hidden the Card Interface will not work.</p>\n                </div>\n            </article>\n        </div>\n\n        <div class=\"my-1 px-1 w-full md:w-1/2 lg:my-4 lg:px-4 lg:w-1/3\">\n            <article class=\"overlow-hidden rounded-lg shadow-lg h-full\">\n                <header class=\"flex items-center justify-between leading-tight p-2 md:p-4 border-b\">\n                    <h4>\n                            <i class=\"fa fa-info-circle text-orange\"></i>\n                            Cards are always last\n                    </h4>\n                </header>\n                <div class=\"p-2 md:p-4\">\n                    <p>\n                        You can add content to the Card Interface item using the <a target=\"_blank\" href=\"https://help.blackboard.com/Learn/Administrator/Hosting/Tools_Management/Content_Editor\"> \n                            Blackboard content editor</a>. But the cards will always appear after your content.\n                    </p>\n                </div>\n            </article>\n        </div>\n\n    </div>\n  </div>\n`;\n\n//---------------------\n// Specify where the documentation is located\n\n// Github version\nconst DOCUMENTATION_LINKS = {\n    what: 'https://djplaner.github.io/Card-Interface-Tweak/whatWhy/',\n    addingCI: 'https://djplaner.github.io/Card-Interface-Tweak/createCards/',\n    cardTypes: 'https://djplaner.github.io/Card-Interface-Tweak/customiseACard/#types-of-cards-information-and-navigation',\n    cardComponents: 'https://djplaner.github.io/Card-Interface-Tweak/customiseACard/#the-components-of-a-card',\n    addImage: 'https://djplaner.github.io/Card-Interface-Tweak/customiseACard/#adding-an-image',\n    addActiveImage: 'https://djplaner.github.io/Card-Interface-Tweak/customiseACard/#adding-an-_active-_image',\n    imageFit: 'https://djplaner.github.io/Card-Interface-Tweak/customiseACard/#changing-how-the-image-fits-the-card',\n    backgroundColour: 'https://djplaner.github.io/Card-Interface-Tweak/customiseACard/#using-a-background-colour',\n    useVideo: 'https://djplaner.github.io/Card-Interface-Tweak/customiseACard/#use-a-video-powerpoint-presentation-etc-instead',\n    changeDate: 'https://djplaner.github.io/Card-Interface-Tweak/customiseACard/#adding-a-date-or-date-range',\n    changeCardLabel: 'https://djplaner.github.io/Card-Interface-Tweak/customiseACard/#changing-the-card-label',\n    changeCardNumber: 'https://djplaner.github.io/Card-Interface-Tweak/customiseACard/#changing-the-card-number',\n    noCardNumber: 'https://djplaner.github.io/Card-Interface-Tweak/customiseACard/#removing-the-card-number',\n    hideCard: 'https://djplaner.github.io/Card-Interface-Tweak/customiseACard/#hiding-a-card',\n    comingSoon: 'https://djplaner.github.io/Card-Interface-Tweak/customiseACard/#making-a-coming-soon-card',\n    enableReview: 'https://djplaner.github.io/Card-Interface-Tweak/customiseACard/#enabling-review-status',\n    // customise all cards\n    changeOrder: 'https://djplaner.github.io/Card-Interface-Tweak/customiseAllCards/#how-to-change-the-order-of-cards',\n    changeEngage: 'https://djplaner.github.io/Card-Interface-Tweak/customiseAllCards/#how-to-change-or-remove-the-engage-button',\n    templatesAndAttributes: 'https://djplaner.github.io/Card-Interface-Tweak/customiseAllCards/#how-to-customise-templates-and-attributes',\n    arrangeVertical: 'https://djplaner.github.io/Card-Interface-Tweak/customiseAllCards/#how-to-arrange-cards-vertically-using-templatevertical',\n    cardsPerRow: 'https://djplaner.github.io/Card-Interface-Tweak/customiseAllCards/#how-to-change-the-number-of-cards-per-row-using-templateb1y123456',\n    assessment: 'https://djplaner.github.io/Card-Interface-Tweak/customiseAllCards/#how-to-use-the-assessment-template-templateassessment',\n};\n\nconst DOCUMENTATION_HTML = `\n\n<div id=\"gu_card_intro\"></div>\n\n<h3>More information</h3>\n\n  <div class=\"box-content mx-auto border-none h-auto py-0 px-4 m-0\">\n    <div class=\"flex flex-wrap -mx-1 lg:-mx-4\">\n        <div class=\"my-1 px-1 w-full md:w-1/2 lg:my-4 lg:px-4 lg:w-1/3\">\n            <article class=\"overlow-hidden rounded-lg shadow-lg h-full\">\n                <header class=\"flex items-center justify-between leading-tight p-2 md:p-4 border-b\">\n                    <h4 class=\"text-lg\">\n                            Getting started\n                    </h4>\n                </header>\n                <div class=\"p-2 md:p-4\">\n                    Learn about\n                    <ul style=\"padding-left:1em; margin-left:0\">\n                     <li> the <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.what}\">\n                       what and why</a> of the Card Interface.</li>\n                      <li> <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.addingCI}\">\n                   adding the Card Interface</a> to a new Blackboard page. </li>\n                      <li> <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.cardTypes}\">types of cards</a>.</li>\n                      <li> <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.cardComponents}\">card components</a>.</li>\n                  </ul>\n\n                </div>\n            </article>\n        </div>\n\n        <div class=\"my-1 px-1 w-full md:w-1/2 lg:my-4 lg:px-4 lg:w-1/3\">\n            <article class=\"overlow-hidden rounded-lg shadow-lg h-full\">\n                <header class=\"flex items-center justify-between leading-tight p-2 md:p-4 border-b\">\n                    <h4 class=\"text-lg\">\n                            Customising a card\n                    </h4>\n                </header>\n                <div class=\"p-2 md:p-4\">\n        How do you...\n        <ul style=\"padding-left:1em; margin-left:0\">\n           <li> <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.addImage}\">Add an image to a card</a>. </li>\n           <li> <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.addActiveImage}\">Add an <em>active</em> image to a card</a>. </li>\n           <li> <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.imageFit}\">fit an image</a> in a card. </li>\n           <li> <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.backgroundColour}\">Use a background colour</a>, rather than an image. </li>\n           <li> <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.useVideo}\">Add video or other embed type</a> to a card.</li>\n           <li> Add or <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.changeDate}\">change the date or date range</a>. </li>\n           <li> <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.changeCardLabel}\">Change the card label</a>. <br />\n                <i class=\"fa fa-plus-square text-green\"></i> now auto-increment multiple labels\n           </li> \n           <li> <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.changeCardNumber}\">Change the card number</a>. </li>\n           <li> <i class=\"fa fa-plus-square text-green\"></i>\n           <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.noCardNumber}\">Remove the card number</a>. </li>\n           <li> <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.hideCard}\">Hide a card</a>. </li>\n           <li> <i class=\"fa fa-plus-square text-green\"></i>\n           Turn a card to a <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.comingSoon}\">\"Coming Soon\" (🚧) card</a>. </li>\n           <li> <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.enableReview}\">Enable \"Review Status\"</a>. </li>\n        </ul>\n                </div>\n            </article>\n        </div>\n\n        <div class=\"my-1 px-1 w-full md:w-1/2 lg:my-4 lg:px-4 lg:w-1/3\">\n            <article class=\"overlow-hidden rounded-lg shadow-lg h-full\">\n                <header class=\"flex items-center justify-between leading-tight p-2 md:p-4 border-b\">\n                    <h4 class=\"text-lg\">\n                           Customising all cards \n                    </h4>\n                </header>\n                <div class=\"p-2 md:p-4\">\n        How do you...   \n        <ul style=\"padding-left:1em; margin-left:0\">\n           <li> <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.changeOrder}\">Change the card order</a>. </li>\n           <li> <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.changeEngage}\">Change the engage button</a>. </li>\n           <li> <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.arrangeVertical}\">Arrange cards vertically</a>. </li>\n           <li> <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.cardsPerRow}\">Change the number of cards per row</a>. </li>\n           <li> <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.assessment}\">Use the assessment template</a>. </li>\n           <li> <a target=\"_blank\" href=\"${DOCUMENTATION_LINKS.templatesAndAttributes}\">Learn about templates and attributes</a>. </li>\n          </ul>\n                </div>\n            </article>\n        </div>\n\n    </div>\n</div>\n`;\n\n// GLOBALS\n\nconst DEFAULT_CARD_LABEL = 'Module';\n\n// Big kludge for HDR\n\nfunction hideJourney($) {\n    // console.log(\"---------- RUNNING THE tmp script\");\n\n    var tweak_bb_active_url_pattern = 'listContent.jsp';\n    window.tweak_bb = {\n        display_view: (location.href.indexOf(tweak_bb_active_url_pattern) > 0),\n        page_id: '#content_listContainer',\n        row_element: 'li',\n    };\n\n    var journeyTitle = jQuery(tweak_bb.page_id + ' > ' + tweak_bb.row_element).find('.item h3').filter(':contains(\"Your HDR Journey\")').eq(0);\n    // console.log(journeyTitle);\n    var journey = jQuery(journeyTitle).parent().next('div.details').children('.vtbegenerated');\n    // console.log(journey);\n    var child = jQuery(journey).children('.yourJourney');\n    // console.log(child);\n    jQuery(child).unwrap();\n}\n/** **\n * TODO\n * - Add a \"right now\" important way to highlight a card\n * - Configure the number of cards and width of cards (e.g. 2 for assessment)\n * - Fix issues with formatting within the card\n * - Explore the use of opacity to highlight the whole card?\n *     i.e. an overview that goes over the top? or perhaps just shade bottom same blue as the border with white text\n */\n\ndocument.addEventListener('DOMContentLoaded', cardsInterface);\n\nexport default function cardsInterface() {\n    //    jQuery(\"ul#content_listContainer\").hide();\n\n    /* define variables based on Bb page type */\n    /* used to identify important components in html */\n    var tweak_bb_active_url_pattern = 'listContent.jsp';\n    window.tweak_bb = {\n        display_view: (location.href.indexOf(tweak_bb_active_url_pattern) > 0),\n        page_id: '#content_listContainer',\n        row_element: 'li',\n    };\n\n    /* Calculate actual term by using id=\"courseMenuLink\"\n       * - which includes the courseId */\n\n    let courseTitle = jQuery('#courseMenu_link').attr('title');\n    if (location.href.indexOf('listContent.jsp') > 0) {\n        $('.gutweak').parents('li').hide();\n    }\n\n    //\n    jQuery('#gu_card_docs').html(DOCUMENTATION_HTML);\n    jQuery('#gu_card_intro').html(INTRO_HTML);\n\n    // Calculate the actual TERM for this course based on the\n    // courseId. If it doesn't parse, just leave it as the default\n    // initialised term\n\n    [TERM, DEFAULT_YEAR] = calculateTermYear(courseTitle);\n\n    LOCATION = location.href.indexOf('listContent.jsp');\n\n    var cardInterface = jQuery(tweak_bb.page_id + ' > ' + tweak_bb.row_element).find('.item h3').filter(function (x) {\n        return this.innerText.toLowerCase().includes('card interface');\n    },\n    ).eq(0);\n\n    if (cardInterface.length === 0) {\n        return false;\n    }\n    /* Get the titles and descriptions of the items on the page */\n    var items = getCardItems($);\n\n    /* generate the cards interface for the tiems */\n    // addCardInterface(items);\n    jQuery(window).on('load', addCardInterface(items));\n\n    // remove click event handler from engage buttons\n\n    // Add event handler for the engage links\n    /*jQuery(\".gu-engage\").click( function(e) {\n  \n              e.stopPropagation();\n      }); */\n\n    /** ------ cards should be created by now -- */\n    /* But make all the links in carddescription stop propagation */\n    var cardContent = jQuery('.carddescription [href]').not('.gu-engage');\n\n    for (var i = 0; i < cardContent.length; i++) {\n        cardContent[i].addEventListener('click', function (e) {\n            // aim here is to allow internal links to override the\n            // cardmainlink\n            e.stopPropagation();\n        }, false);\n    }\n\n    /* Make all of the cards clickable by adding an event handler  */\n    // Does this unwrap actually do anything???\n    // jQuery( \".cardmainlink[href='undefined'\" ).contents().unwrap();\n    // return true;\n    var cards = document.querySelectorAll('.clickablecard');\n    // var cards = document.querySelectorAll(\".cardmainlink\");\n    for (i = 0; i < cards.length; i++) {\n        cards[i].addEventListener('click', function (event) {\n            var link = this.querySelector('.cardmainlink');\n\n            if (link !== null) {\n                // prevent clicking on a undefined blackboard link\n                if (link.match(/blackboard\\/content\\/undefined$/)) {\n                    console.log('Undefined');\n                } else {\n                    link.click();\n                }\n            }\n        }, false);\n    }\n\n    // if we want the images to be hidden, hide them at the end\n    if (HIDE_IMAGES) {\n        jQuery('.bg-cover').hide();\n    }\n    // check if the item icons exists, before trying to remove them\n    let checkIcon = setInterval(function () {\n        if (jQuery('img.item_icon').length) {\n            removeBlackboardIcon(cardInterface);\n            clearInterval(checkIcon);\n        }\n    }, 100);\n\n    //    jQuery(\"ul#content_listContainer\").show();\n}\n\n/**\n * @desc Identify course term and year from course title\n * @param {string} courseTitle course code, name and id in brackets\n * @return {Array} term and year\n *\n * TODO\n * - how to handle QCM courses with different calendar\n */\n\nfunction calculateTermYear(courseTitle) {\n    let term = TERM,\n        year = DEFAULT_YEAR;\n\n    // get the course id which will be in brackets\n    // e.g.\n    //    Collapse 1731QCM Creative Studio Practices 1 (1731QCM_3211_SB)\n\n    let m = courseTitle.match(/^.*\\((.+)\\)/);\n    // we found a course Id, get the STRM value\n    if (m) {\n        let id = m[1];\n        // break the course Id up into its components\n\n        // Check for an OUA course (e.g. com10) where the letters are first\n        let breakIdRe = new RegExp('^([A-Z]+[0-9]+)_([0-9][0-9][0-9][0-9])_([A-Z][A-Z])$');\n        m = id.match(breakIdRe);\n\n        // found an actual course site (rather than org site)\n        if (m) {\n            term = m[2];\n\n            // set the year\n            mm = term.match(/^[0-9]([0-9][0-9])[0-9]$/);\n            if (mm) {\n                year = 20 + mm[1];\n            } else {\n                year = DEFAULT_YEAR;\n            }\n        } else {\n            // check for a normal GU course, numbers first\n\n            // match an unjoined course\n            //  course code_STRM_offering - 1731QCM_3211_SB\n            //\n            breakIdRe = new RegExp('^([0-9]+[A-Z]+)_([0-9][0-9][0-9][0-9])_([A-Z][A-Z])$');\n            m = id.match(breakIdRe);\n\n            if (m) {\n                // found an actual course site (rather than org site)\n                term = m[2];\n\n                // set the year\n                mm = term.match(/^[0-9]([0-9][0-9])[0-9]$/);\n                if (mm) {\n                    year = 20 + mm[1];\n                } else {\n                    year = DEFAULT_YEAR;\n                }\n            } else {\n                // Match a joined course (no offering on the end)\n                breakIdRe = new RegExp('^([0-9]+[A-Z]+)_([0-9][0-9][0-9][0-9])$');\n\n                m = id.match(breakIdRe);\n\n                // found an actual course site (rather than org site)\n                if (m) {\n                    term = m[2];\n                    // set the year\n                    mm = term.match(/^[0-9]([0-9][0-9])[0-9]$/);\n                    if (mm) {\n                        year = 20 + mm[1];\n                    } else {\n                        year = DEFAULT_YEAR;\n                    }\n                } else {\n                    // Match Y1 QCM courses e.g. 3526QCM_Y1_3211_SB\n                    breakIdRe = new RegExp('^([0-9]+[A-Z]+)_(Y[0-9])_([0-9][0-9][0-9][0-9])_([A-Z][A-Z])$');\n                    m = id.match(breakIdRe);\n                    if (m) {\n                        term = m[3];\n                        mm = term.match(/^[0-9]([0-9][0-9])[0-9]$/);\n                        if (mm) {\n                            year = 20 + mm[1];\n                        } else {\n                            year = DEFAULT_YEAR;\n                        }\n                    }\n                }\n            }\n        }\n        // if this is a QCM course (either offering of joined), then update term\n        let qcmRe = new RegExp('^([0-9]+QCM)_([0-9][0-9][0-9][0-9])');\n        let qcmRe2 = new RegExp('^([0-9]+QCM)_(Y[0-9])_([0-9][0-9][0-9][0-9])');\n        // m = qcmRe.match(id);\n        m = id.match(qcmRe);\n        // let m2 = qcmRe2.match(id);\n        let m2 = id.match(qcmRe2);\n        if (m || m2) {\n            term = term + 'QCM';\n        }\n    }\n\n    //    console.log( `cards.js::calculateTermYear - id is ${id} Term is ${term} Year is ${year}`);\n    return [term, year];\n}\n\n/** *\n * Extract an array of items from the page that have been specified as part\n * of the card interface\n */\n\nfunction getCardItems($) {\n    // Find all the items that containg Card Image: OR Card Image Iframe:\n    // Case insensitive\n    // This will include any Content Item that includes this string\n    // even if it isn't meant to be a card\n    var cardRE = new RegExp('(card image) ?(iframe)?:', 'i');\n\n    var bbItems = jQuery(tweak_bb.page_id + ' > ' + tweak_bb.row_element).children('.details').children('.vtbegenerated').filter(\n        function () {\n            return this.innerHTML.match(cardRE);\n            // SKETCHY TODO\n            // return match = this.innerHTML.match(cardRE);\n        },\n    );\n\n    var cards = extractCardsFromContent(bbItems);\n\n    return cards;\n}\n\n/**\n * @function extractCardMetaData\n * @param {jQuery} descriptionObject contain content of Blackboard content item\n * @returns {Object} Each field has a meta data value extracted from descriptionObject\n *\n * Assumes description is broken in <p> but checks with.\n */\n\nfunction extractCardMetaData(descriptionObject) {\n    // define hash to put values into it\n    let metaDataValues = {};\n    let description = jQuery(descriptionObject).html();\n    const CARD_METADATA_FIELDS = [\n        'card label', 'card number',\n        'card date', 'card date label',\n        'card coming soon', 'card coming soon label',\n        'assessment type', 'assessment weighting', 'assessment outcomes',\n        'card image', 'card image iframe', 'card image size', 'card image active',\n    ];\n\n    // remove new lines from description\n    description = description.replace(/(?:\\r\\n|\\r|\\n)/g, ' ');\n\n    // break up description into collection of ps and focus\n    // use outerHTML to get the surrounding <p> etc so that it can be removed from\n    // the description\n    // TODO: Does this change screw up the complex shit that other people can\n    //  do when they use line breaks, include HTML etc\n    let elementHtmlObjects = jQuery(descriptionObject).find('p');\n    let elementContent = jQuery(elementHtmlObjects).toArray().map(x => x.innerHTML);\n\n    let tmpMetaData = [];\n\n    // console.log(\"----------------------- extractCardMetaData\");\n    // check and break up the ps into individual bits of meta data\n    let maxLength = elementContent.length;\n    for (let i = 0; i < maxLength; i++) {\n        //       console.log(`    _____________ working on para ${i} == ${elementContent[i]}`);\n        // work on a temp copy of description\n        // let partialDescription = elementContent[i].innerHTML;\n        let partialDescription = elementContent[i];\n        // get rid of newlines (definitely needed)\n        partialDescription = partialDescription.replace(/(?:\\r\\n|\\r|\\n)/g, ' ');\n\n        CARD_METADATA_FIELDS.forEach(function (element) {\n            // search for the element, but initially assume that there is another\n            // metadata variable within the current item (i.e. <p> </p>)\n            // This happens when a <br> is used, rather than <p> between metadata\n            // look for element, followed by a card metadata\n            let re = new RegExp('(' + element + '\\\\s*:\\\\s*.*)card\\s+(?:label|number|date|date label|image size|image active)[^:]*:', 'mi');\n            let m = partialDescription.match(re);\n            // if not, check for assessment\n            if (!m) {\n                re = new RegExp('(' + element + '\\\\s*:\\\\s*.*)assessment\\s+(?:type|weighting|outcomes)[^:]*:', 'mi');\n                m = partialDescription.match(re);\n            }\n\n            // if found, then we need extract just the matched element, leaving\n            // the rest for a later iteration\n            if (m) {\n                //              console.log(`     -- found partial Descripiton match ${m[1]}`);\n                // remove match from partialDescription, leaving any other potential\n                // card stuff there for later (hence why m[1], not m[0])\n                partialDescription = partialDescription.replace(m[1], '');\n                // remove the match from the broader description\n                // description = description.replace(m[1],'');\n                // TODO does raise the question of why m[0] okay here\n                description = description.replace(m[1], '');\n                // added element for later processing - but remove the &nbsp;\n                tmpMetaData.push(m[1].replace(/&nbsp;/gi, ' '));\n            } else {\n                // the <p> contains just the one metadata, replace the whole para\n                // bad at RE, so check if it's the last one\n                //             console.log(\"     -- bad RE???\");\n                re = new RegExp('(' + element + '\\\\s*:\\\\s*.*)', 'mi');\n                //                re = new RegExp( \"<p.*(\" + element + \"\\\\s*:\\\\s*.*)</p>$\", \"mi\" );\n                m = partialDescription.match(re);\n                if (m) {\n                    // remove it from partial description\n                    // partialDescription = partialDescription.replace(re,'');\n                    partialDescription = partialDescription.replace(m[1], '');\n                    // remove the match from the broader description\n                    // TODO doesn't remove the surrounding <p> </p>\n                    //                    description = description.replace(m[1],'');\n                    description = description.replace(m[1], '');\n                    // added element for later processing - but remove any &nbsp;\n                    tmpMetaData.push(m[1].replace(/&nbsp;/gi, ' '));\n                } else {\n                    // console.log(`      Search for ${element} no match`);\n                }\n            }\n\n        });\n    }\n\n    //    console.log(\"---------------------- Finished parsing Ps\");\n    //   console.log(tmpMetaData);\n    // At this stage tmpMetaData contains \"html\" for each card meta data\n    // format should be \"card label: value\"\n    // Loop thru each tmpMetaData element and extract value appropriately\n    //  place in an object label -> value\n    for (let i = 0; i < tmpMetaData.length; i++) {\n        // extract the metaData label m[1] and value m[2]\n        let re = new RegExp('\\\\s*(card\\\\s*[^:]*)\\\\s*:\\\\s*(.*)', 'im');\n        let m = tmpMetaData[i].match(re, 'im');\n\n        // didn't find a card value, try one of the assessment ones\n        if (!m) {\n            re = new RegExp('\\\\s*(assessment\\\\s*[^:]*)\\\\s*:\\\\s*(.*)', 'im');\n            m = tmpMetaData[i].match(re, 'im');\n        }\n\n        if (m) {\n            // extract label and value\n            // ensure label matches METADATA name archetypes\n            let label = m[1].trim().replace(/\\\\s*/, ' ').toLowerCase();\n            let value = m[2];\n            // make sure the HTML in value is valid\n            let div = document.createElement('div');\n            div.innerHTML = value;\n            let newValue = div.innerHTML;\n\n            metaDataValues[label] = newValue;\n        } else {\n        }\n    }\n\n    // used to edit the description element and ensure that it is correct HTML\n    let div = document.createElement('div');\n    div.innerHTML = description;\n    // not used in inlineImage (yet)\n\n    // handle the inline image\n    let inlineImage = jQuery(descriptionObject).find('img').attr('title', 'Card Image');\n\n    //   Exclude /images/ci/icon/cmlink_generic.gif from img\n    if (inlineImage.length && !inlineImage[0].src.includes(BBIMG)) {\n        // we have real image\n        // replace the card image value with the inline image\n        metaDataValues['card image'] = inlineImage[0].src;\n        // remove the inline image content from the description\n        let img = jQuery(div).find(`img[src=\"${inlineImage[0].src}\"]`).remove();\n    }\n\n    // there may also be other .contextMenuContainer elements that will need to be removed\n    // because Bb needs to do more work, but only does it if they are in .vtbgenerated (which cards are not)\n    // there may be other Bb additions that need cleaning\n    // e.g.\n    // - TODO spans with attr data-ally-scoreindicator\n\n    // remove the .contextMenuContainers from description\n    let menuContainers = jQuery(div).find('.contextMenuContainer').remove();\n\n    // Make sure that the description is valid HTML (mostly closing tags)\n    // jQuery handles this by default\n    description = div.innerHTML;\n    // remove any empty <p> tags from desciption\n    description = description.replace(/<p>\\s*<\\/p>/g, '');\n    // add the description minus metadata to metaDataValues, for later use\n    metaDataValues['description'] = description;\n\n    return metaDataValues;\n}\n\n//------------------------------------------------------\n// FUNCTIONS to handle card meta data changes\n\n// handleCardImage()\n// - given value associated with \"card image\", could be URL or html\n\nfunction handleCardImage(param) {\n    let picUrl = '',\n        cardBGcolour = 'black';\n\n    // is it a data URI, just return it\n    const regex = /^data:((?:\\w+\\/(?:(?!;).)+)?)((?:;[\\w\\W]*?[^;])*),(.+)$/;\n    if (regex.test(param)) {\n        return [param, cardBGcolour];\n    }\n\n    // check to see if it's a colour, rather than an image\n    // TODO might need to modify identifyPicUrl to remove extraneous\n    // lead html if there is a href?? after img src is checked??\n    picUrl = identifyPicUrl(param);\n    cardBGcolour = identifyCardBackgroundColour(param);\n\n    // TODO/CHECK previously there was a test to remove a trainling </p> from end\n    // Maybe this should be handled in the picURL\n\n    return [picUrl.trim(), cardBGcolour];\n}\n\n// handleCardImageIframe\n// - given the HTML for an iframe, modify any height/width params\n//   to be more responsive\n\nfunction handleCardImageIframe(param) {\n    // replace the width and height\n    let x = param.match(/width=\"[^\"]+\"/i);\n    if (x) {\n        param = param.replace(x[0], 'width=\"100%\"');\n    }\n    x = param.match(/height=\"[^\"]+\"/i);\n    if (x) {\n        param = param.replace(x[0], 'height=\"auto\"');\n    }\n    return param;\n}\n\n// handleCardImageSize\n// - return contain if set\n\nfunction handleCardImageSize(param) {\n    if (param.includes('contain')) {\n        return 'contain';\n    }\n    return '';\n}\n\n//* *************************************************\n// handleCardDate( description )\n// - given a description for an item find and parse Card Date\n// - return an object that has two members\n//   - start - start or only date {date:??,month:??}\n//   - stop  - end date\n// Options include\n// - specify specific date by text\n//          Card Date: Mar 5\n// - specify date by text and time\n//          Card Date: HH:MM Mar 5\n// - specify date by week of Griffith term (monday)\n//          Card Date: Week 1\n// - specify date by week of Griffith term (monday) and time\n//          Card Date: HH:MM Week 1\n// - specify a date range\n//          Card Date: Mar 5-Mar 10\n//          Card Date: Week 3-5\n// - specify a day of the week\n//          Card Date: Monday Week 5\n//          Card Date: Mon Week 5\n// - specify a day of the week\n//          Add HH::MM to the front of the above\n\nfunction handleCardDate(param) {\n    let empty1 = { date: '', week: '' };\n    let empty2 = { date: '', week: '' };\n    let date = { start: empty1, stop: empty2 }; // object to return\n\n    param = param.replace(/<[^>]+>/, '');\n\n    // is it a range (i.e. contain a -)\n    let m = param.match(/^(.*)-(.*)$/);\n\n    if (m) {\n        // get first date and break it down\n        date.start = parseDate(m[1]);\n        // get second date and break it down\n        // TODO Week 3-5 results in m[2] being just 5 (need to add week)\n        // m[2]==int then add week\n\n        date.stop = parseDate(m[2].trim(), true);\n        //        if ( /^\\+?(0|[1-9]\\d*)$/.test(m[2].trim()) ) {\n        //           m[2] = \"Week \".concat(m[2].trim());\n        //      }\n        //     date.stop = parseDate(m[2]);\n        if (date.stop.time === '') {\n            date.stop.time = '23:59';\n        }\n    } else { // not a range\n        // get the date and break it down\n        date.start = parseDate(param);\n    }\n\n    if (typeof (date) === 'undefined') {\n        return { start: empty1, stop: empty2 };\n    }\n\n    // if no time defined, set the default (midnight)\n    if (typeof (date.start) !== 'undefined' && date.start.time === '') {\n        date.start.time = '0:01';\n    }\n    return date;\n}\n\n/**\n * @function parseDate\n * @param {String} param\n * @param {Boolean} endRange is the date the end of a date range?\n * @returns {Object} date\n * @description Convert string date - (HH:MM) (Week 1) (Mar 25) into date\n *   If endRange and date is trimester week, then get the date for Friday\n */\n\nfunction parseDate(param, endRange = false) {\n    let date = {}; // object to return\n    let time = '';\n\n    // check for a time at the start of the date and save it away\n    //  then add it at the end\n    // HH:MM 24-hour format, optional leading 0, but with whitespace at end\n    const regex = /\\s*([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]\\s*$/;\n    let m = param.match(regex);\n\n    if (m) {\n        // save the time\n        time = m[0];\n        // remove time from param\n        param = param.replace(regex, '');\n    }\n    // a number by itself is the scond part of a week period\n    // add week\n    if (/^\\+?(0|[1-9]\\d*)$/.test(param)) {\n        param = 'Week '.concat(param);\n    }\n\n    // is it a week of trimester\n    m = param.match(/^\\s*week\\s*([0-9]*)/i);\n    if (m) {\n        let week = m[1];\n        if (!endRange) {\n            // if not end of range, just get Monday\n            date = getTermDate(week);\n        } else {\n            // end of range should be set to Friday\n            date = getTermDate(week, true, 'Fri');\n        }\n    } else {\n        // does it have a day of week\n        // start date becomes start of week + number of days in\n        m = param.match(\n            /^\\s*\\b(((mon|tues|wed(nes)?|thu|thur(s)?|fri|sat(ur)?|sun)(day)?))\\b\\s*week *([0-9]*)\\s*$/i);\n        if (m) {\n            const day = m[1];\n            const week = m[m.length - 1];\n            date = getTermDate(week, true, day);\n        } else {\n            // is it the an actual date\n            m = param.match(/ *([a-z]+) ([0-9]+)/i);\n            if (m) {\n                date = { month: m[1], date: m[2], year: DEFAULT_YEAR };\n            }\n            // else {\n            // Fall back to check for exam period\n            //   m = param.match(/ *exam *(period)*/i);\n            //   if (m) {\n            //       date.start = getTermDate('exam');\n            //       date.stop = getTermDate('exam', false);\n            //    }\n            // }\n        }\n    }\n    if (typeof date !== 'undefined') {\n        if (time !== '') {\n            date.time = time;\n        } else {\n            date.time = '';\n        }\n    }\n\n    return date;\n}\n\n// Given some HTML, remove all the HTML code, trim and return the text\n\nfunction cleanTrimHtml(html) {\n    const aux = document.createElement('div');\n    aux.innerHTML = html;\n    return aux.innerText.trim();\n}\n// handleCardLabelNumber\n// - given hash with last number for each label type and label and number\n//   return the appropriate [ label, number] to use for the card\n// - label is the label specified for the card,\n//   - if nothing, default to module\n// - number specify card number,\n//   - if nothing & nothing in numbering element set to 1,\n//   - else set to the next value from numbering element\n// Labels can only ever be text\n\n// storage for the multiple label numberings used across all cards\nvar CARD_LABEL_NUMBERING = {};\n\nfunction handleCardLabelNumber(label, number) {\n    // Handle the cases where label is\n    // - empty - we don't want a label\n    // - undefined - we want the default label\n\n    // ensure label is empty HTML (incl &nbsp; as empty)\n    let trimLabel = cleanTrimHtml(label);\n\n    if (trimLabel === '') {\n        // return no label or number if the label is empty (but defined)\n        return ['', ''];\n    } else if (typeof (number) !== 'undefined' && number.match(/none/i)) {\n        // if there is a card number and it is the word \"none\", then\n        // return the label and an empty number\n        // TODO, should this be label of trimLabel. i.e allow user defined\n        // html to be included as part of the label?\n        return [label, ''];\n    } else if (typeof (label) === 'undefined') {\n        // set the label to the DEFAULT if no label specified\n        // numbering gets decided below.\n        trimLabel = DEFAULT_CARD_LABEL;\n        label = DEFAULT_CARD_LABEL;\n    }\n\n    // Update the numbering schemes\n    // - no existing numbering, set to 1\n    // - otherwise increment existing\n    if (!(trimLabel in CARD_LABEL_NUMBERING)) {\n        CARD_LABEL_NUMBERING[trimLabel] = 1;\n    }\n    else { // if it does exist increment to next value\n        CARD_LABEL_NUMBERING[trimLabel] += 1;\n    }\n\n    // if specific number specified, set numbering to that\n    if (typeof (number) !== 'undefined') {\n        CARD_LABEL_NUMBERING[trimLabel] = parseInt(number);\n    }\n\n    return [label, CARD_LABEL_NUMBERING[trimLabel]];\n}\n\n//--------------------------------\n// extractCardsFromContent( myCard)\n// - given an array of cards (HTML) convert into a reasonabl edatastructure\n\nfunction extractCardsFromContent(myCards) {\n\n    let items = [];\n    // reset card numbering\n    CARD_LABEL_NUMBERING = {};\n\n    // Loop through each card and construct the items array with card data\n    myCards.each(function (idx) {\n        // jQuery(this) - is the vtbgenerated div for a BbItem\n\n        // ------- check for any review status element\n        let review = getReviewStatus(this);\n\n        // Parse the description and remove the Card Image data\n        // vtbegenerated_div is specific to Blackboard.\n        // But it also appears to change all <p> with a class to div with\n        // the match class, hence the not[class] selector\n        jQuery(this).children('div.vtbegenerated_div,div:not([class=\"\"])').replaceWith(\n            function () {\n                return jQuery('<p />', { html: jQuery(this).html() });\n            },\n        );\n        var description = jQuery(this).html();\n\n        // - get rid of any &nbsp; inserted by Bb\n        description = description.replace(/&nbsp;/gi, ' ');\n        description = description.replace(/\\n/gi, '');\n\n        // extract all the possible meta data\n        let cardMetaData = extractCardMetaData(this);\n\n        // now have cardMetaData with all meta data and the non meta data\n        // description. Need to make the necessary changes based on data\n        // loop through each of the elements (but not description)\n\n        // tmp variables used to hold results before putting into single card object\n        let bgSize = '',\n            dateLabel = 'Commencing',\n            picUrl,\n            cardBGcolour;\n        let label = DEFAULT_CARD_LABEL,\n            activePicUrl = '',\n            number = '&nbsp;',\n            iframe = '';\n        let date,\n            comingSoon,\n            comingSoonLabel = 'Available';\n        let assessmentType = '',\n            assessmentWeighting = '',\n            assessmentOutcomes = '';\n\n        for (let index in cardMetaData) {\n            switch (index) {\n                case 'card image':\n                    [picUrl, cardBGcolour] = handleCardImage(cardMetaData[index]);\n                    break;\n                case 'card image active':\n                    [activePicUrl, cardBGcolour] = handleCardImage(cardMetaData[index]);\n                    break;\n                case 'card image iframe':\n                    iframe = handleCardImageIframe(cardMetaData[index]);\n                    break;\n                case 'card image size':\n                    bgSize = handleCardImageSize(cardMetaData[index]);\n                    break;\n                case 'card date':\n                    date = handleCardDate(cardMetaData[index]);\n                    break;\n                case 'card date label':\n                    dateLabel = cardMetaData[index];\n                    break;\n                case 'card coming soon':\n                    comingSoon = handleCardDate(cardMetaData[index]);\n                    break;\n                case 'card coming soon label':\n                    comingSoonLabel = cardMetaData[index];\n                    break;\n                case 'assessment type':\n                    assessmentType = cardMetaData[index];\n                    break;\n                case 'assessment weighting':\n                    assessmentWeighting = cardMetaData[index];\n                    break;\n                case 'assessment outcomes':\n                    assessmentOutcomes = cardMetaData[index];\n                    break;\n            }\n        }\n        // handle card label and card number together\n        [label, number] = handleCardLabelNumber(\n            cardMetaData['card label'], cardMetaData['card number']);\n\n        // description changed to remove all the meta data\n        description = cardMetaData['description'];\n\n        // TODO is this still used?\n        // Find any ItemDetailsHeaders that indicate the item is hidden\n        let hidden = jQuery(this).parent().find('.contextItemDetailsHeaders').filter(\":contains('Item is hidden from students.')\");\n        // .siblings('contextItemDetailsHeaders')\n\n        // Grab the link that the card is pointing to\n        // need to get back to the header which is up one div, a sibling, then span\n        var header = jQuery(this).parent().siblings('.item').find('span')[2];\n        var title = jQuery(header).html(),\n            link,\n            linkTarget = '';\n\n        //--------------------------------\n        // Three options for link\n        // 1. A link on the header (e.g. content folder)\n        // 2. No link (e.g. a content item)\n        // 3. A link in the attached filed (content item with attached file)\n        //    This one is kludgy. e.g. doesn't handle multiple files.\n        //    Currently sets the link to the last file\n        //    TODO figure out what do with multiple files\n        link = jQuery(header).parents('a').attr('href');\n        linkTarget = jQuery(header).parents('a').attr('target');\n\n        // if link is empty, must be content item\n        if (link === undefined) {\n            // check to see if there are attached fileds\n            let filesThere = jQuery(this).parent().find('.contextItemDetailsHeaders').filter(\":contains('Attached Files:')\");\n\n            if (filesThere !== undefined) {\n                // get a list of all attached files\n                let lis = jQuery(this).parent().find('.contextItemDetailsHeaders').children('.detailsValue').children('ul').children('li');\n\n                // loop through the files and get the link\n                lis.each(function (idx, li) {\n                    // get the link\n                    link = jQuery(li).children('a').attr('href');\n                });\n            }\n            // .siblings('contextItemDetailsHeaders')\n        }\n\n        // get the itemId to allow for \"edit\" link in card\n        var itemId = jQuery(this).parents('.liItem').attr('id');\n        // Hide the contentItem  TODO Only do this if display page\n        var tweak_bb_active_url_pattern = 'listContent.jsp';\n        if (location.href.indexOf(tweak_bb_active_url_pattern) > 0) {\n            // TODO un comment this Reviewed\n            jQuery(this).parent().parent().hide();\n            // console.log( \"content item \" + contentItem.html());\n        }\n        // save the item for later\n        var item = {\n            title: title,\n            picUrl: picUrl,\n            bgSize: bgSize,\n            cardBGcolour: cardBGcolour,\n            description: description,\n            date: date,\n            label: label,\n            link: link,\n            linkTarget: linkTarget,\n            review: review,\n            dateLabel: dateLabel,\n            id: itemId,\n            activePicUrl: activePicUrl,\n            comingSoon: comingSoon,\n            comingSoonLabel: comingSoonLabel,\n            assessmentWeighting: assessmentWeighting,\n            assessmentOutcomes: assessmentOutcomes,\n            assessmentType: assessmentType,\n        };\n        if (number !== 'x') {\n            item.moduleNum = number;\n        }\n        if (iframe !== '') {\n            item.iframe = iframe;\n        }\n\n        // only add the card to display if\n        // - VIEW MODE is on and it's not hidden\n        // - EDIT MODE is on\n        if (hidden.length === 0 || LOCATION < 0) {\n            // add message that item is hidden to students when EDIT mode on\n            if (hidden.length === 1) {\n                item.description = item.description.concat(HIDDEN_FROM_STUDENTS);\n            }\n            items.push(item);\n        }\n    });\n\n    // console.log(items);\n    return items;\n}\n\n/**\n * @function removeBlackboardIcon\n * @param {Object} cardInterface jQuery object for where the card interface will go\n * @description If exists, update cardInterface to remove Blackboard icon\n */\n\nfunction removeBlackboardIcon(cardInterface) {\n    let container = jQuery(cardInterface).parent().parent();\n    // hide the icon\n    let icon = jQuery(container).find('img.item_icon').css('display', 'none');\n    // update the padding on the div\n    let div = jQuery(container).find('div.details').css('padding-left', '10px');\n}\n\n/** **\n * addCardInterface( items )\n * - Given an array of items to translate into cards add the HTML etc\n *   to generate the card interface\n * - Add the card interface to any item that has a title including\n *     \"Card Interface:\" with an optional title\n *\n */\n\nfunction addCardInterface(items) {\n\n    // Define which template to use\n    let template = HORIZONTAL;\n    let linkTemplate = HORIZONTAL;\n    let engageVerb = 'Engage';\n\n    // Define the text for Review Status\n    let MARK_REVIEWED = 'Mark Reviewed';\n    let REVIEWED = 'Reviewed';\n    let NO_CARD_NUMBER = false;\n    let NO_COMING_SOON = false;\n\n    // get the content item with h3 heading containing Card Interface\n    var cardInterface = jQuery(window.tweak_bb.page_id + ' > ' + window.tweak_bb.row_element).find('.item h3').filter(function (x) {\n        return this.innerText.toLowerCase().includes('card interface');\n    },\n    ).eq(0);\n\n    if (cardInterface.length === 0) {\n        console.log(\"Card: Can't find item with heading 'Card Interface' in which to insert card interface\");\n        return false;\n    } else {\n        // get the title - text only, stripped of whitespace before/after\n        var cardInterfaceTitle = jQuery.trim(cardInterface.text());\n\n        // Extract parameters\n        var m = cardInterfaceTitle.match(/Card Interface *([^<]*)/i);\n        var WIDTH = 'md:w-1/3';\n\n        if (m) {\n            let newParams = parse_parameters(m[1]);\n            let x = '';\n\n            if (newParams) {\n                newParams.forEach(function (element) {\n                    m = element.match(/template=[\"']vertical['\"]/i);\n                    let m1 = element.match(/template=vertical/i);\n                    if (m || m1) {\n                        template = VERTICAL;\n                    } else if (element.match(/template=['\"]horizontal['\"]/i)) {\n                        template = HORIZONTAL;\n                    } else if (element.match(/nocardnumber/i)) {\n                        NO_CARD_NUMBER = true;\n                    } else if (element.match(/nocomingsoon/i)) {\n                        NO_COMING_SOON = true;\n                    } else if (element.match(/noimages/i)) {\n                        HIDE_IMAGES = true;\n                    } else if (x = element.match(/template=by([2-6])/i)) {\n                        WIDTH = 'md:w-1/' + x[1];\n                    } else if (x = element.match(/by([2-6])/i)) {\n                        WIDTH = 'md:w-1/' + x[1];\n                    } else if (x = element.match(/[Bb][yY]1/)) {\n                        WIDTH = 'md:w-full';\n                    } else if (element.match(/people/i)) {\n                        template = PEOPLE;\n                    } else if (element.match(/noengage/i)) {\n                        linkTemplate = HORIZONTAL_NOENGAGE;\n                    } else if (element.match(/logging/i)) {\n                        LOGGING = true;\n                    } else if (m = element.match(/engage=([^']*)/)) {\n                        engageVerb = m[1];\n                    } else if (m = element.match(/template=assessment/i)) {\n                        template = ASSESSMENT;\n                    } else if (m = element.match(/set[Dd]ate=([^\\s]*)/)) {\n                        SET_DATE = m[1];\n                    } else if (m = element.match(/^reviewed=([^']*)/ui)) {\n                        REVIEWED = m[1];\n                    } else if (m = element.match(/^markReviewed=(.+)/i)) {\n                        MARK_REVIEWED = m[1];\n                    }\n                });\n            }\n        } // if no match, stay with default\n    }\n\n    //  console.log(\"LOGGING IS \" + LOGGING);\n    // make the h3 for the Card Interface item disappear\n    // (Can't hide the parent as then you can't edit via Bb)\n    // Need to have the span in order to be able to reorder\n    cardInterface.html('<span class=\"reorder editmode\"></span>');\n    // Get the content area in which to insert the HTML\n    var firstItem = cardInterface.parent().siblings('.details');\n\n    // Use the card HTML template and the data in items to generate\n    // HTML for each card\n    var cards = '';\n    var moduleNum = 1;\n    items.forEach(function (idx) {\n        let cardHtml = cardHtmlTemplate[template];\n        let linkHtml = linkItemHtmlTemplate[linkTemplate];\n\n        // coming soon\n        // By default comingSoon is empty\n        let comingSoon = '';\n        // TODO need to only display this if outside the date\n        if (typeof (idx.comingSoon) !== 'undefined' && !NO_COMING_SOON) {\n            if (!inDateRange(idx.comingSoon, false)) {\n                // we have coming soon and NOT in the available date range\n                // generate the html\n                comingSoon = generateDateHtml(comingSoonHtmlTemplate[template],\n                    dualComingSoonHtmlTemplate[template],\n                    idx.comingSoon);\n                comingSoon = comingSoon.replace('{COMING_SOON_LABEL}', idx.comingSoonLabel);\n\n                // if students are viewing remove the link stuff\n                if (window.tweak_bb.display_view) {\n                    // don't show an engage button\n                    linkHtml = '';\n                    // remove the clickableCard link and hover shadow\n                    cardHtml = cardHtml.replace('clickablecard', '').replace(\n                        'hover:outline-none hover:shadow-outline ', '',\n                    );\n                }\n            }\n        }\n        cardHtml = cardHtml.replace('{COMING_SOON}', comingSoon);\n\n        // TODO either here, or above in the link section need to remove\n        // the link\n        cardHtml = cardHtml.replace('{WIDTH}', WIDTH);\n\n        // replace the default background colour if a different one\n        // is specific\n        if (idx.cardBGcolour) {\n            cardHtml = cardHtml.replace(/background-color:\\s*rgb\\(255,255,255\\)/i, 'background-color: ' + idx.cardBGcolour);\n        }\n\n        // <div class=\"bg-cover h-48\" style=\"background-image: url('{PIC_URL}'); //background-color: rgb(255,255,204)\">{IFRAME}\n        // replace the Engage verb\n\n        //---------------------------------------------\n        // Add in the mark review/reviewed options\n        var reviewTemplate = '';\n        if (idx.review !== undefined) {\n            // only do it if there is a review option found\n            // check whether its a mark review or review\n            // - if link contains markUnreviewed then it has been\n            //   reviewed\n            if (idx.review.match(/markUnreviewed/)) {\n                reviewTemplate = markUnReviewedLinkHtmlTemplate[template];\n                reviewTemplate = reviewTemplate.replace('{REVIEWED}', REVIEWED);\n            } else {\n                // it's the other one which indicates it has not been reviewed\n                reviewTemplate = markReviewLinkHtmlTemplate[template];\n\n                reviewTemplate = reviewTemplate.replace('{MARK_REVIEWED}', MARK_REVIEWED);\n            }\n            // set the right link\n            reviewTemplate = reviewTemplate.replace('{LINK}', idx.review);\n        }\n        cardHtml = cardHtml.replace('{REVIEW_ITEM}', reviewTemplate);\n        // console.log(\"template is \" + template);\n        // Only show module number if there's a label\n        if (idx.label !== '') {\n            var checkForNum = idx.moduleNum;\n            if (NO_CARD_NUMBER) {\n                // global setting not to show card numbers\n                cardHtml = cardHtml.replace('{MODULE_NUM}', '');\n                checkForNum = '';\n            } else if (idx.moduleNum) {\n                // if there's a hard coded moduleNum use that\n                cardHtml = cardHtml.replace('{MODULE_NUM}', idx.moduleNum);\n            } else {\n                // use the one we're calculating\n                // cardHtml = cardHtml.replace('{MODULE_NUM}',moduleNum);\n                cardHtml = cardHtml.replace(/\\{MODULE_NUM\\}/g, idx.moduleNum);\n                // checkForNum probably not required\n                checkForNum = idx.moduleNum;\n            }\n\n            // Update the title, check to see if it starts with label and\n            // moduleNum.  If it does, remove them from the title\n            // So that the card doesn't duplicate it, but the information is\n            // still there in Blackboard\n            var regex = new RegExp('^' + idx.label.trim() + '\\\\s*' + checkForNum +\n                '\\\\s*[-:]*\\\\s*(.*)', 's');\n            // const regex = /^Week\\s*1\\s*[-:]*\\s*(.*)/gs;\n\n            var m = idx.title.match(regex);\n            // var m = regex.test(idx.title);\n            if (m) {\n                idx.title = m[1];\n                // kludge for COM14 which has a <br> after label in title\n                idx.title = idx.title.replace(/^<br\\s*\\/*>/i, '');\n            }\n        } else {\n            cardHtml = cardHtml.replace('{MODULE_NUM}', '');\n        }\n        cardHtml = cardHtml.replace('{LABEL}', idx.label);\n\n        // ------------------ set the card image\n\n        // Two options for BG_SIZE\n        // 1. cover (bg-cover)\n        //    Default option. Image covers the entire backgroun\n        // 2. contain (bg-contain bg-no-repeat)\n        //    Entire image must fit within the card\n\n        if (idx.bgSize === 'contain') {\n            cardHtml = cardHtml.replace(/{BG_SIZE}/,\n                'bg-contain bg-no-repeat bg-center');\n        } else {\n            cardHtml = cardHtml.replace(/{BG_SIZE}/, 'bg-cover');\n        }\n\n        // figure out which image we're going to show\n        var picUrl = setImage(idx);\n\n        // replace the {IMAGE_URL} variable if none set\n        if (!idx.hasOwnProperty('iframe')) {\n            cardHtml = cardHtml.replace(/{IFRAME}/g, '');\n        } else {\n            cardHtml = cardHtml.replace(/{IFRAME}/g, idx.iframe);\n            // set pic URl to empty so non is provided\n            picUrl = '';\n        }\n        cardHtml = cardHtml.replace(/{PIC_URL}/g, picUrl);\n        cardHtml = cardHtml.replace('{TITLE}', idx.title);\n        cardHtml = cardHtml.replace(/\\{ASSESSMENT[_ ]TYPE\\}/g, idx.assessmentType);\n        cardHtml = cardHtml.replace(/\\{WEIGHTING\\}/g, idx.assessmentWeighting);\n        cardHtml = cardHtml.replace(/\\{LEARNING_OUTCOMES\\}/g, idx.assessmentOutcomes);\n\n        // Get rid of some crud Bb inserts into the HTML\n        let description = idx.description.replace(/<p/g, '<p class=\"pb-2\"');\n        description = description.replace(/<a/g, '<a class=\"underline\"');\n        cardHtml = cardHtml.replace('{DESCRIPTION}', description);\n        // Does the card link to another content item?\n        //\t    console.log( \" template is \" + template + \" and H_E \" + HORIZONTAL_NOENGAGE);\n        if (idx.link) {\n            // add the link\n\n            linkHtml = linkHtml.replace('{ENGAGE}', engageVerb);\n            cardHtml = cardHtml.replace('{LINK_ITEM}', linkHtml);\n            // if there is a label and no hard coded moduleNum,\n            //  then increment the module number\n            // TENTATIVE\n            /*          if (idx.label !== \"\" && !idx.moduleNum) {\n                                moduleNum++;\n                            } */\n        } else {// if (template!==HORIZONTAL_NOENGAGE) {\n            // remove the link, as there isn't one\n            cardHtml = cardHtml.replace('{LINK_ITEM}', '');\n            cardHtml = cardHtml.replace(/<a href=\"{LINK}\">/g, '');\n            cardHtml = cardHtml.replace('</a>', '');\n            // remove the shadow/border effect\n            cardHtml = cardHtml.replace('hover:outline-none', '');\n            cardHtml = cardHtml.replace('hover:shadow-outline', '');\n            // don't count it as a module\n            //  cardHtml = cardHtml.replace(idx.label + ' ' + moduleNum, '');\n            // moduleNum--;\n        }\n\n        // If there is a linkTarget in Blackboard\n        if (typeof idx.linkTarget !== 'undefined') {\n            // replace \"{LINK}\" with \"{LINK}\" target=\"linkTarget\"\n            cardHtml = cardHtml.replace(/\"{LINK}\"/g, '\"{LINK}\" target=\"' +\n                idx.linkTarget + '\"');\n        }\n\n        if (typeof idx.link !== 'undefined') {\n            cardHtml = cardHtml.replace(/{LINK}/g, idx.link);\n        } else {\n            cardHtml = cardHtml.replace(/<a href=\"{LINK}\" class=\"cardmainlink\">/g, '');\n            cardHtml = cardHtml.replace(/class=\"clickablecard /, 'class=\"');\n        }\n\n        // Should we add a link to edit/view the original content\n        if (location.href.indexOf('listContentEditable.jsp') > 0) {\n            const editLink = editLinkTemplate.replace('{ID}', idx.id);\n            cardHtml = cardHtml.replace(/{EDIT_ITEM}/, editLink);\n        } else {\n            // cardHtml = cardHtml.replace(/{EDIT_ITEM}/,'');\n\n            // editLink = editLinkTemplate.replace('{ID}', idx.id);\n            const editLink = '<div><a href=\"#hello\">&nbsp;</a></div>';\n            cardHtml = cardHtml.replace(/{EDIT_ITEM}/, editLink);\n        }\n\n        // standard date\n        let date = '';\n        date = generateDateHtml(dateHtmlTemplate[template],\n            dualDateHtmlTemplate[template], idx.date);\n        date = date.replace('{DATE_LABEL}', idx.dateLabel);\n        cardHtml = cardHtml.replace('{DATE}', date);\n\n        // add the individual card html to the collection\n        cards = cards.concat(cardHtml);\n    });\n\n    // STick the cards into the complete card HTML\n    var interfaceHtml = interfaceHtmlTemplate[template];\n    interfaceHtml = interfaceHtml.replace('{CARDS}', cards);\n    // Insert the HTML to the selected item(s)\n    // return false;\n    jQuery(firstItem).append(interfaceHtml);\n}\n\n/**\n * @function to12\n * @param {String} t 24 hour\n * @returns {String} time converted to 12 hour with am/pm\n */\n\nfunction to12(t) {\n\n    if (typeof (t) === 'undefined') {\n        return '';\n    }\n    // break home and set hh, m\n    const regex = /^\\s*([0-9]|0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])\\s*/;\n    let m = t.match(regex);\n\n    // we have a 24 hour time, convert it\n    if (m) {\n        let h,\n            hh,\n            mins,\n            dd = 'AM';\n        hh = parseInt(m[1]);\n        mins = parseInt(m[2]);\n\n        h = hh;\n        // set PM\n        if (h >= 12) {\n            h = hh - 12;\n            dd = 'PM';\n        }\n        if (h == 0) {\n            h = 12;\n        }\n        if (mins < 10) {\n            mins = `0${mins}`;\n        }\n        return `${h}:${mins} ${dd}`;\n    }\n    // not a 24 hour time show nothing\n    return '';\n}\n\n/**\n * @function generateDateHtml\n * @params singleTemplate {String} HTML for a single date\n * @params dualTemplate {String} HTML for a dual date\n * @params date {Object} the date data structure\n * @description parse the date object and use the correct template to\n * construct date html to be added to the card\n */\n\nfunction generateDateHtml(singleTemplate, dualTemplate, date) {\n    // by default no html\n    let cardHtml = '';\n\n    if (typeof (date) !== 'undefined' &&\n        typeof (date.start) !== 'undefined' && 'month' in date.start) {\n        // Do we have dual dates - both start and stop?\n        if (date.stop.month) {\n            // start and stop dates\n            // cardHtml = cardHtml.replace('{DATE}', dualDateHtmlTemplate[template]);\n            cardHtml = dualTemplate;\n            cardHtml = cardHtml.replace(/{MONTH_START}/g,\n                date.start.month);\n            cardHtml = cardHtml.replace(/{DATE_START}/g,\n                date.start.date);\n            cardHtml = cardHtml.replace(/{MONTH_STOP}/g,\n                date.stop.month);\n            cardHtml = cardHtml.replace(/{DATE_STOP}/g,\n                date.stop.date);\n            cardHtml = cardHtml.replace(/{TIME_STOP}/g,\n                to12(date.stop.time));\n            cardHtml = cardHtml.replace(/{TIME_START}/g,\n                to12(date.start.time));\n            if (!date.start.hasOwnProperty('week')) {\n                cardHtml = cardHtml.replace('{WEEK}', '');\n            } else {\n                // if exam, use that template\n                // other wise construct dual week\n                let weekHtml = examPeriodTemplate;\n                if (date.start.week !== 'exam') {\n                    weekHtml = dualWeekHtmlTemplate.replace('{WEEK_START}',\n                        date.start.week);\n                    weekHtml = weekHtml.replace('{WEEK_STOP}',\n                        date.stop.week);\n                }\n                cardHtml = cardHtml.replace('{WEEK}', weekHtml);\n            }\n        } else {\n            // just start date\n            // cardHtml = cardHtml.replace('{DATE}', dateHtmlTemplate[template]);\n            cardHtml = singleTemplate;\n            cardHtml = cardHtml.replace(/{MONTH}/g, date.start.month);\n            cardHtml = cardHtml.replace(/{DATE}/g, date.start.date);\n            cardHtml = cardHtml.replace(/{TIME}/g, to12(date.start.time));\n            //                cardHtml = cardHtml.replace(/{DATE_LABEL}/g, idx.dateLabel);\n            if (!date.start.hasOwnProperty('week')) {\n                cardHtml = cardHtml.replace('{WEEK}', '');\n            } else { // SKETCHY TODO change added block around else\n                let weekReplace = 'Week ' + date.start.week;\n                if (date.start.hasOwnProperty('day')) {\n                    weekReplace = date.start.day + ' ' + weekReplace;\n                }\n                let weekHtml = weekHtmlTemplate.replace('{WEEK}', weekReplace);\n                cardHtml = cardHtml.replace('{WEEK}', weekHtml);\n            }\n        }\n    }\n    return cardHtml;\n}\n\n/**\n * @function inDateRange\n * @param cardDate {Object} card.date object\n * @param assumeStop {Boolean} true if assuming a stop date if one not specified\n * @returns {Boolean} true if the current time (or SET_DATE) is within the\n *                  date range\n */\n\nfunction inDateRange(cardDate, assumeStop = true) {\n\n    if (typeof (cardDate) !== 'undefined') {\n        let start,\n            stop,\n            now;\n\n        // Set now to current date OR SET_DATE if we want to do testing\n        if (SET_DATE === '') {\n            now = new Date();\n        } else {\n            now = new Date(SET_DATE);\n        }\n\n        // set the start date\n        if (cardDate.start.hasOwnProperty('month') &&\n            cardDate.start.month !== '') {\n\n            start = convertToDate(cardDate.start);\n        }\n\n        // set the card stop date\n        // - to card.date.stop if valid\n        // - to the end of the week if using a week\n        // - to the end of the day if no stop\n        if (cardDate.stop.hasOwnProperty('month') &&\n            cardDate.stop.month !== '') {\n            if (cardDate.stop.time === '') {\n                cardDate.stop.time = '23:59';\n            }\n            stop = convertToDate(cardDate.stop);\n        } else if (cardDate.start.hasOwnProperty('week') &&\n            cardDate.start.week !== '') {\n            // there's no end date, but there is a start week\n            // so set stop to end of that week, but only if inWeek is true\n            if (cardDate.start.week in TERM_DATES[TERM]) {\n                if (assumeStop) {\n                    stop = new Date(TERM_DATES[TERM][cardDate.start.week].stop);\n                    stop.setHours(23, 59, 0);\n                }\n            } else {\n                // problem with week, just set it to end of date\n                if (typeof (start) !== 'undefined' && assumeStop) {\n                    stop = new Date(start.getTime());\n                    stop.setHours(23, 59, 0);\n                }\n            }\n            /*        } else { // no week for stop, meaning it's just on the day\n                              stop = new Date(start.getTime());\n                              stop.setHours(23, 59, 0); */\n        }\n\n        // figure out if we're in range\n        if (typeof (stop) !== 'undefined') {\n            // if stop defined, check in range\n            return (now >= start && now <= stop);\n        } else {\n            // check passed start\n            return (now >= start);\n        }\n    }\n    return false;\n}\n\n/**\n * @function convertToDate\n * @param {Object} dateObj\n * @returns {Date} Javascript date object\n * Converts the simple date object into a Javascript date object\n */\n\nfunction convertToDate(dateObj) {\n\n    // check for valid month??\n    let date = new Date(dateObj.year, MONTHS_HASH[dateObj.month],\n        parseInt(dateObj.date));\n\n    // if time set time\n    if (dateObj.hasOwnProperty('time') && dateObj.time !== '') {\n        // split into hours minutes\n        let m = dateObj.time.match(/^\\s*([0-9]|0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])\\s+/);\n\n        if (m) {\n            date.setHours(m[1], m[2], 0);\n        }\n    }\n    return date;\n\n}\n\n//* ********************\n// getTermDate( week, day )\n// - given a week of Griffith semester return date for the\n//   start of that week\n// - optional pass day of the week, add more days Monday=0\n\nfunction getTermDate(week, startWeek = true, dayOfWeek = 'Monday') {\n\n    if (typeof TERM_DATES[TERM] === 'undefined') {\n        return undefined;\n    }\n\n    dayOfWeek = dayOfWeek.toLowerCase();\n    // console.log(\"TERM is \" + TERM + \" week is \" + week);\n    var date = { date: '', month: '', week: week, year: 0 };\n    if ((week < 0) || (week > 15)) {\n        if (week !== 'exam') {\n            return date;\n        }\n    }\n    var start;\n    if (startWeek === true) {\n        // setting start week\n        if (typeof TERM_DATES[TERM][week] !== 'undefined') {\n            start = TERM_DATES[TERM][week].start;// [week].start;\n        }\n    } else {\n        start = TERM_DATES[TERM][week].stop;\n    }\n    var d = new Date(start);\n\n    // if dayOfWeek is not Monday, add some days\n    if (dayOfWeek !== 'monday') {\n        var dayToNum = {\n            tuesday: 1,\n            tue: 1,\n            wednesday: 2,\n            wed: 2,\n            thursday: 3,\n            thu: 3,\n            friday: 4,\n            fri: 4,\n            saturday: 5,\n            sat: 5,\n            sunday: 6,\n            sun: 6,\n        };\n        // add in the day abbreviation so it can appear\n        date.day = dayOfWeek.charAt(0).toUpperCase() + dayOfWeek.substr(1, 2);\n        if (dayOfWeek in dayToNum) {\n            d.setDate(d.getDate() + dayToNum[dayOfWeek.toLowerCase()]);\n        }\n    }\n\n    date.month = MONTHS[d.getMonth()];\n    date.date = d.getDate();\n    date.year = d.getFullYear();\n\n    return date;\n}\n\n//* ************************************************************\n// picUrl = setImage( card )\n// - given card object containing information about a card\n// - return picUrl if no active card image\n// - return picUrl if there is an active card image, but it's\n//   not the date\n// - return activePicUrl if there is one and it's not the date\n\nfunction setImage(card) {\n\n    // only use activePicURL if it is set and there are dates on\n    // the card\n    if (card.activePicUrl !== '' &&\n        typeof (card.date) !== 'undefined') {\n        // there is an activePicUrl, check if it should be active\n\n        // active means that the current date falls within the start/stop\n        // dates for the card\n        var start,\n            stop,\n            now;\n\n        // Set now to current date OR SET_DATE if we want to do testing\n        if (SET_DATE === '') {\n            now = new Date();\n        } else {\n            now = new Date(SET_DATE);\n        }\n\n        // set the start date\n        if (card.date.start.hasOwnProperty('month') &&\n            card.date.start.month !== '') {\n\n            start = new Date(parseInt(DEFAULT_YEAR),\n                // MONTHS.indexOf(card.date.start.month),\n                MONTHS_HASH[card.date.start.month],\n                parseInt(card.date.start.date));\n        }\n\n        // set the card stop date\n        // - to card.date.stop if valid\n        // - to the end of the week if using a week\n        // - to the end of the day if no stop\n        if (card.date.stop.hasOwnProperty('month') &&\n            card.date.stop.month !== '') {\n            stop = new Date(DEFAULT_YEAR, MONTHS_HASH[card.date.stop.month], card.date.stop.date);\n            stop.setHours(23, 59, 0);\n        } else if (card.date.start.hasOwnProperty('week')) {\n            // there's no end date, but there is a start week\n            // so set stop to end of that week\n            if (card.date.start.week in TERM_DATES[TERM]) {\n                stop = new Date(TERM_DATES[TERM][card.date.start.week].stop);\n                stop.setHours(23, 59, 0);\n            } else {\n                // problem with week, just set it to end of date\n                if (typeof (start) !== 'undefined') {\n                    stop = new Date(start.getTime());\n                    stop.setHours(23, 59, 0);\n                }\n            }\n        } else { // no week for stop, meaning it's just on the day\n            stop = new Date(start.getTime());\n            stop.setHours(23, 59, 0);\n        }\n\n        if (now >= start && now <= stop) {\n            return card.activePicUrl;\n        }\n    }\n    return card.picUrl;\n}\n\n//* *************************************************************\n// cardBGcolour = identifyCardBackgroundColour( value );\n// return undefined if value is not a valid CSS colour\n// Otherwise return rgb(X,Y,Z)\n\nfunction identifyCardBackgroundColour(input) {\n\n    // don't both if it's an empty string or a URL (or relative URL)\n    let url = input.match(/^\\s*http/i) || input.match(/^\\//);\n    if (input === '' || url) {\n        return undefined;\n    }\n    var div = document.createElement('div'),\n        m;\n    div.style.color = input;\n    // add to DOMTree to work\n    document.body.appendChild(div);\n\n    // extract the rgb numbers\n    m = getComputedStyle(div).color.match(/^rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/i);\n    if (m) {\n        return 'rgb(' + m[1] + ',' + m[2] + ',' + m[3] + ')';\n    }\n    return undefined;\n}\n\n//* *************************************************************\n// picUrl = identifyPicUrl( value )\n// TODO - return \"\" if value is not a valid URI\n//   Otherwise return the value\n\nfunction identifyPicUrl(value) {\n    let re = new RegExp(/img src=\"([^\"]*)/, 'i');\n    let m = value.match(re);\n\n    // found an image\n    if (m) {\n        // not a BBIMG, then return it\n        if (!m[1].includes(BBIMG)) {\n            console.log(\"-- doens't include BBIMG\");\n            return m[1];\n        }\n        // is a BBIMG try extract the link\n        // kludge because I couldn't get registers to work in JS REs\n        re = new RegExp(/<a href=\"([^\"]*)\">([^>]*)<\\/a>/, 'i');\n        m = value.match(re);\n        if (m) {\n            if (m[1] === m[2]) {\n                return m[1];\n            }\n        }\n    }\n\n    // is there a link to the image\n    re = new RegExp('href=\"([^\"]*)', 'i');\n    m = value.match(re);\n\n    // if it's a <a href=\"picUrl\"></a> return the picUrl\n    if (m) {\n        return m[1];\n    }\n\n    // remove all html and just use the text content that's left\n    let tmp = document.createElement('DIV');\n    tmp.innerHTML = value;\n    value = tmp.textContent || tmp.innerText || '';\n    // must be just a lone URL TODO check it actually does\n    return value;\n}\n\n//-----------------------------------------------------------------\n// getReviewStatus\n// - given a vtbgenerated item from Bb Item, check to see if the\n//   parent div contains a review status element (anchor with class\n//   button-5)\n// - if not return NULL\n// - if there is one return the link (which indicates with it's\n//   mark reviewed, or reviewed)\n\nfunction getReviewStatus(vtbgen) {\n    // get parent\n    var parent = jQuery(vtbgen).parent();\n\n    // check to see if it has the anchor with class button-5\n    const review = jQuery(parent).find('a.button-5');\n\n    if (review.length === 0) {\n        return undefined;\n    } else {\n        return jQuery(review).attr('href');\n    }\n}\n\n//---------------------------------------------------------------------\n// Given a string of parameters use some Stack Overflow provided\n// regular expression magic to split it up into its component parts\n\nfunction parse_parameters(cmdline) {\n    //    var re_next_arg = /^\\s*((?:(?:\"(?:\\\\.|[^\"])*\")|(?:'[^']*')|\\\\.|\\S)+)\\s*(.*)$/;\n    let re_next_arg = /^\\s*((?:(?:\"(?:\\\\.|[^\"])*\")|(?:'[^']*')|\\\\.|\\S)+)\\s*(.*)$/;\n    let next_arg = ['', '', cmdline];\n    let args = [];\n    while (next_arg = re_next_arg.exec(next_arg[2])) {\n        let quoted_arg = next_arg[1];\n        let unquoted_arg = '';\n        while (quoted_arg.length > 0) {\n            if (/^\"/.test(quoted_arg)) {\n                let quoted_part = /^\"((?:\\\\.|[^\"])*)\"(.*)$/.exec(quoted_arg);\n                unquoted_arg += quoted_part[1].replace(/\\\\(.)/g, '$1');\n                quoted_arg = quoted_part[2];\n            } else if (/^'/.test(quoted_arg)) {\n                let quoted_part = /^'([^']*)'(.*)$/.exec(quoted_arg);\n                unquoted_arg += quoted_part[1];\n                quoted_arg = quoted_part[2];\n            } else if (/^\\\\/.test(quoted_arg)) {\n                unquoted_arg += quoted_arg[1];\n                quoted_arg = quoted_arg.substring(2);\n            } else {\n                unquoted_arg += quoted_arg[0];\n                quoted_arg = quoted_arg.substring(1);\n            }\n        }\n        args[args.length] = unquoted_arg;\n    }\n    return args;\n}"],"sourceRoot":""}